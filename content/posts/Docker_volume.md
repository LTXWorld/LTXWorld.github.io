+++
date = '2024-11-18T18:49:09+08:00'
title = '玩转Docker系列——volume'
categories = ["核心技术"]
tags = ["容器","docker"]
+++

# Docker_Volumes

在使用docker时你或多或少都会有疑问，我的数据被存到哪里去了？docker化之后为什么得到的镜像这么小，比我原始的程序要小这么多？特别是如果我将Mysql容器化，那它保存的记录都去哪里了？

今天我将进入Docker_Volumes的世界，与大家聊聊Docker是如何处理数据持久化的。

秉持着STFW&RTFM的精神，我从[官方的手册](https://docs.docker.com/engine/storage/)看起，并且辅助以测试实验来验证手册中的理论，设计实验部分使用了部分AI工具辅助。

本机环境:macos15.1，Docker version 27.2.0, build 3ab4256

# Storage

手册中一开始就说明了默认情况下，容器内部创建的所有文件都存储在可写容器层上(详见docker基础原理)，这意味着，当该容器不存在时，数据不会持久化。

那不会持久化可不行啊，我MYSQL关键点之一就是持久化啊，另一个容器要用我的数据结果你取不出来锁在容器里面了，这两个容器交互不就完犊子了吗？不行不行，得有个办法来实现数据的持久化，要不然我docker还怎么立足于容器生态江湖。（想在这里插个表情包）

docker设计者也当然为我想到了这种情况，于是他提供了两种解决方法：

* 数据持久化到主机的磁盘上
* 数据持久化到主机的内存中

嘿，怎么有点Mysql的感觉了？扯远了，第一种解决方法又详细地分为了卷挂载和绑定挂载，至于这三者有何区别，且看手册中这张图片：
![](/img/docker/volume1.png)
