+++
date = '2025-11-16T06:53:42+08:00'
draft = true
title = '052当我不用AI时解决的问题'
+++

## 403

![1](/img/debug/403.png)

我想要找 `.htaccess` 文件在我的文件系统中，结果发现不会用 find 命令

写了第一个 find 命令没想到命令行库库出结果,还都不是和.htaccess 有关的文件。

忍不住要去问 ai 这到底是怎么回事儿了，但是这正是困难所在不是吗？该去看 find 文档了。`man find`

最终经过测试，对照了一下这个问题两个原因

- 首先，博主已经声明不要挂梯子访问该网站
- 其次，在去掉梯子后 firefox 还是无法访问，Safari 可以访问，推得是二者 DNS 问题
  - 前者采用强保护设置，由大善人 Cloudflare 设置 DNS，后者采用本地的 DNS ？
  - ![2](/img/debug/cfdns.png)

那新问题又出现了，如何查看这两种 dns？

## 本地DNS

翻找之前的笔记发现，在 linux 上，dns 是这么查找到的 `sudo cat /etc/resolv.conf`

在 macos 上，同样的方法，发现此文件是自动生成的，系统也给了提示，让去某个地方找

```bash
base ❯ cat /etc/resolv.conf
#
# macOS Notice
#
# This file is not consulted for DNS hostname resolution, address
# resolution, or the DNS query routing mechanism used by most
# processes on this system.
#
# To view the DNS configuration used by this system, use:
#   scutil --dns
#
# SEE ALSO
#   dns-sd(1), scutil(8)
#
# This file is automatically generated.
#
nameserver 8.8.8.8
```

所以找到的结果如下

```bash
scutil --dns
DNS configuration

resolver #1
  nameserver[0] : 8.8.8.8
  flags    : Request A records, Request AAAA records
  reach    : 0x00000002 (Reachable)

resolver #2
  domain   : local
  options  : mdns
  timeout  : 5
  flags    : Request A records, Request AAAA records
  reach    : 0x00000000 (Not Reachable)
  order    : 300000

resolver #3
  domain   : 254.169.in-addr.arpa
  options  : mdns
  timeout  : 5
  flags    : Request A records, Request AAAA records
  reach    : 0x00000000 (Not Reachable)
  order    : 300200

resolver #4
  domain   : 8.e.f.ip6.arpa
  options  : mdns
  timeout  : 5
  flags    : Request A records, Request AAAA records
  reach    : 0x00000000 (Not Reachable)
  order    : 300400

resolver #5
  domain   : 9.e.f.ip6.arpa
  options  : mdns
  timeout  : 5
  flags    : Request A records, Request AAAA records
  reach    : 0x00000000 (Not Reachable)
  order    : 300600

resolver #6
  domain   : a.e.f.ip6.arpa
  options  : mdns
  timeout  : 5
  flags    : Request A records, Request AAAA records
  reach    : 0x00000000 (Not Reachable)
  order    : 300800

resolver #7
  domain   : b.e.f.ip6.arpa
  options  : mdns
  timeout  : 5
  flags    : Request A records, Request AAAA records
  reach    : 0x00000000 (Not Reachable)
  order    : 301000

DNS configuration (for scoped queries)

resolver #1
  nameserver[0] : 8.8.8.8
  if_index : 11 (en0)
  flags    : Scoped, Request A records, Request AAAA records
  reach    : 0x00000002 (Reachable)
```


发现几个有意思的点

- scutil 命令在 macos 中用于查找系统配置参数很强大
- 怎么这么多的都显示 Not Reachable
- 这些参数各自是什么意思？

于是我又去搜索，哇，好多好多新的知识再次扑面而来。（关于新知识与遗忘这一点，我觉得有个不错的 idea）

### scutil

这是一个 macos 上管理系统配置参数的指令，一般有以下使用场景:

```bash
scutil --dns
scutil --proxy
scutil --get ComputerName/LocalHostName/HostName
scutil --set ComputerName/LocalHostName/HostName
```

### mdns

观察上面的 dns 结果，发现由一众 resolver 组成，即递归解析器。（负责向root,TLD,权威域名服务器发送请求）

我来逐一学习一下 resolvers 中所列出的参数

- domain
- options
- timeout
- flags
- reach
- order

#### domain

#### options



#### timeout

#### flags

这里涉及到两个地址，一个是 DNS A,一个是 DNS AAAA:前者是给定域的 IPv4 地址，后者是 IPv6 地址

即权威域名服务器给递归解析器返回的网站的实际地址
