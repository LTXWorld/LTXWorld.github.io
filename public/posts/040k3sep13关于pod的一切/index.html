<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>040K3sEP13关于Pod的一切 | LTX&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="引子
对于 Pod 的一切规则
暂时以这些字段进行测试
Pod:

容器
卷
调度
生命周期
主机名，主机名字空间
服务账号
安全上下文

容器：

镜像
Entrypoint
端口
环境变量
卷
资源
生命周期
安全上下文

Lifetime 生命周期
UID">
<meta name="author" content="LTX">
<link rel="canonical" href="http://localhost:1313/posts/040k3sep13%E5%85%B3%E4%BA%8Epod%E7%9A%84%E4%B8%80%E5%88%87/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.60bb00c7b34dfc1f8b8a6f21b1fe067b40b3bc3a287fc1d4a3657a89a977208e.css" integrity="sha256-YLsAx7NN/B&#43;Lim8hsf4Ge0CzvDoof8HUo2V6ial3II4=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon.png">
<link rel="apple-touch-icon" href="http://localhost:1313/favicon.png">
<link rel="mask-icon" href="http://localhost:1313/favicon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/posts/040k3sep13%E5%85%B3%E4%BA%8Epod%E7%9A%84%E4%B8%80%E5%88%87/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
<script type="text/javascript"

        async

        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">

MathJax.Hub.Config({

  tex2jax: {

    inlineMath: [['$','$'], ['\\(','\\)']],

    displayMath: [['$$','$$'], ['\[\[','\]\]']],

    processEscapes: true,

    processEnvironments: true,

    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],

    TeX: { equationNumbers: { autoNumber: "AMS" },

         extensions: ["AMSmath.js", "AMSsymbols.js"] }

  }

});


MathJax.Hub.Queue(function() {

    

    

    

    var all = MathJax.Hub.getAllJax(), i;

    for(i = 0; i < all.length; i += 1) {

        all[i].SourceElement().parentNode.className += ' has-jax';

    }

});

</script>


<style>

code.has-jax {

    font: inherit;

    font-size: 100%;

    background: inherit;

    border: inherit;

    color: #515151;

}

</style><meta property="og:url" content="http://localhost:1313/posts/040k3sep13%E5%85%B3%E4%BA%8Epod%E7%9A%84%E4%B8%80%E5%88%87/">
  <meta property="og:site_name" content="LTX&#39;s Blog">
  <meta property="og:title" content="040K3sEP13关于Pod的一切">
  <meta property="og:description" content="引子 对于 Pod 的一切规则
暂时以这些字段进行测试
Pod:
容器 卷 调度 生命周期 主机名，主机名字空间 服务账号 安全上下文 容器：
镜像 Entrypoint 端口 环境变量 卷 资源 生命周期 安全上下文 Lifetime 生命周期 UID">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-05-24T19:45:03+08:00">
    <meta property="article:modified_time" content="2025-05-24T19:45:03+08:00">
      <meta property="og:image" content="http://localhost:1313/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png">
<meta name="twitter:title" content="040K3sEP13关于Pod的一切">
<meta name="twitter:description" content="引子
对于 Pod 的一切规则
暂时以这些字段进行测试
Pod:

容器
卷
调度
生命周期
主机名，主机名字空间
服务账号
安全上下文

容器：

镜像
Entrypoint
端口
环境变量
卷
资源
生命周期
安全上下文

Lifetime 生命周期
UID">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "040K3sEP13关于Pod的一切",
      "item": "http://localhost:1313/posts/040k3sep13%E5%85%B3%E4%BA%8Epod%E7%9A%84%E4%B8%80%E5%88%87/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "040K3sEP13关于Pod的一切",
  "name": "040K3sEP13关于Pod的一切",
  "description": "引子 对于 Pod 的一切规则\n暂时以这些字段进行测试\nPod:\n容器 卷 调度 生命周期 主机名，主机名字空间 服务账号 安全上下文 容器：\n镜像 Entrypoint 端口 环境变量 卷 资源 生命周期 安全上下文 Lifetime 生命周期 UID\n",
  "keywords": [
    
  ],
  "articleBody": "引子 对于 Pod 的一切规则\n暂时以这些字段进行测试\nPod:\n容器 卷 调度 生命周期 主机名，主机名字空间 服务账号 安全上下文 容器：\n镜像 Entrypoint 端口 环境变量 卷 资源 生命周期 安全上下文 Lifetime 生命周期 UID\n指数退避延迟\n资源分配 为容器分配资源 requests \u0026 limits\n如果要直接为 Pod 指定分配的资源，需要启用 PodLevelResources feature gate;所以还是为每个容器分配资源，最终资源总和就是这个 pod 资源总和。\n调整资源 传统上，更改 Pod 的资源需求需要删除现有的 Pod 并创建一个替换品，这通常由工作负载控制器管理。\nkubectl edit deploy xxx # 修改 YAML 文件 kubectl rollout restart xxx # 触发滚动重启 原地 Pod 调整大小允许在运行中的 Pod 内更改容器（s）的 CPU/内存分配，从而可能避免应用程序中断 只能调整 CPU 和内存，无法降低内存限制 但是只有高版本支持调整操作，所以调整操作在日常的使用中并不常见？\nQos 服务质量 Guaranteed:limits == requests Burstable:不等于 BestEffort:没有任何要求和限制 查看指定字段信息\n卷 empty volumes volumeMounts 持久卷 pv 持久卷 pvc 持久卷声明:找到符合的 pv 进行绑定并独占 Pod -\u003e pvc -\u003e pv -\u003e 实际存储后端(NFS,hostPath,CephFS) storageClassName 动态供应\nProjected Volume 投影卷，聚合多种资源，统一挂载路径\nsecret configMap downardAPI serviceAccountToken 权限 Security Context securityContext 控制容器中运行用户、组、文件系统权限\nrunAsUser：容器进程的用户ID runAsGroup：容器进程的主要组ID fsGroup：卷的文件系统组ID supplementalGroups：附加组 Service Accounts Pod 中的应用程序与 K8s API 交互；每个 namespace 都有一个 default 用户\n为 Pod 提供精细的 API 访问权限(特定权限)\n",
  "wordCount" : "604",
  "inLanguage": "zh",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "2025-05-24T19:45:03+08:00",
  "dateModified": "2025-05-24T19:45:03+08:00",
  "author":{
    "@type": "Person",
    "name": "LTX"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/040k3sep13%E5%85%B3%E4%BA%8Epod%E7%9A%84%E4%B8%80%E5%88%87/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "LTX's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.png"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="LTX&#39;s Blog (Alt + H)">LTX&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="LTX&#39;s Blog">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/" title="Categories">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="后花园">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      040K3sEP13关于Pod的一切
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h1>
    <div class="post-meta"><span title='2025-05-24 19:45:03 +0800 CST'>五月 24, 2025</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;LTX

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%bc%95%e5%ad%90" aria-label="引子">引子</a></li>
                <li>
                    <a href="#lifetime-%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f" aria-label="Lifetime 生命周期">Lifetime 生命周期</a></li>
                <li>
                    <a href="#%e8%b5%84%e6%ba%90%e5%88%86%e9%85%8d" aria-label="资源分配">资源分配</a><ul>
                        
                <li>
                    <a href="#%e4%b8%ba%e5%ae%b9%e5%99%a8%e5%88%86%e9%85%8d%e8%b5%84%e6%ba%90" aria-label="为容器分配资源">为容器分配资源</a></li>
                <li>
                    <a href="#%e8%b0%83%e6%95%b4%e8%b5%84%e6%ba%90" aria-label="调整资源">调整资源</a></li>
                <li>
                    <a href="#qos-%e6%9c%8d%e5%8a%a1%e8%b4%a8%e9%87%8f" aria-label="Qos 服务质量">Qos 服务质量</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8d%b7" aria-label="卷">卷</a><ul>
                        
                <li>
                    <a href="#empty" aria-label="empty">empty</a></li>
                <li>
                    <a href="#%e6%8c%81%e4%b9%85%e5%8d%b7" aria-label="持久卷">持久卷</a></li>
                <li>
                    <a href="#projected-volume" aria-label="Projected Volume">Projected Volume</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%9d%83%e9%99%90" aria-label="权限">权限</a><ul>
                        
                <li>
                    <a href="#security-context" aria-label="Security Context">Security Context</a></li>
                <li>
                    <a href="#service-accounts" aria-label="Service Accounts">Service Accounts</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="引子">引子<a hidden class="anchor" aria-hidden="true" href="#引子">#</a></h2>
<p>对于 Pod 的一切规则</p>
<p>暂时以这些字段进行测试</p>
<p>Pod:</p>
<ul>
<li>容器</li>
<li>卷</li>
<li>调度</li>
<li>生命周期</li>
<li>主机名，主机名字空间</li>
<li>服务账号</li>
<li>安全上下文</li>
</ul>
<p>容器：</p>
<ul>
<li>镜像</li>
<li>Entrypoint</li>
<li>端口</li>
<li>环境变量</li>
<li>卷</li>
<li>资源</li>
<li>生命周期</li>
<li>安全上下文</li>
</ul>
<h2 id="lifetime-生命周期">Lifetime 生命周期<a hidden class="anchor" aria-hidden="true" href="#lifetime-生命周期">#</a></h2>
<p>UID</p>
<p>指数退避延迟</p>
<h2 id="资源分配">资源分配<a hidden class="anchor" aria-hidden="true" href="#资源分配">#</a></h2>
<h3 id="为容器分配资源">为容器分配资源<a hidden class="anchor" aria-hidden="true" href="#为容器分配资源">#</a></h3>
<p>requests &amp; limits</p>
<p>如果要直接为 Pod 指定分配的资源，需要启用 <code>PodLevelResources</code> feature gate;所以还是为每个容器分配资源，最终资源总和就是这个 pod 资源总和。</p>
<h3 id="调整资源">调整资源<a hidden class="anchor" aria-hidden="true" href="#调整资源">#</a></h3>
<p>传统上，更改 Pod 的资源需求需要删除现有的 Pod 并创建一个替换品，这通常由工作负载控制器管理。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl edit deploy xxx      <span class="c1"># 修改 YAML 文件</span>
</span></span><span class="line"><span class="cl">kubectl rollout restart xxx  <span class="c1"># 触发滚动重启</span>
</span></span></code></pre></div><p>原地 Pod 调整大小允许在运行中的 Pod 内更改容器（s）的 CPU/内存分配，从而可能避免应用程序中断
只能调整 CPU 和内存，无法降低内存限制
但是只有高版本支持调整操作，所以调整操作在日常的使用中并不常见？</p>
<h3 id="qos-服务质量">Qos 服务质量<a hidden class="anchor" aria-hidden="true" href="#qos-服务质量">#</a></h3>
<ul>
<li>Guaranteed:limits == requests</li>
<li>Burstable:不等于</li>
<li>BestEffort:没有任何要求和限制</li>
</ul>
<p>查看指定字段信息</p>
<h2 id="卷">卷<a hidden class="anchor" aria-hidden="true" href="#卷">#</a></h2>
<h3 id="empty">empty<a hidden class="anchor" aria-hidden="true" href="#empty">#</a></h3>
<ul>
<li>volumes</li>
<li>volumeMounts</li>
</ul>
<h3 id="持久卷">持久卷<a hidden class="anchor" aria-hidden="true" href="#持久卷">#</a></h3>
<ul>
<li>pv 持久卷</li>
<li>pvc 持久卷声明:找到符合的 pv 进行绑定并独占</li>
<li>Pod -&gt; pvc -&gt; pv -&gt; 实际存储后端(NFS,hostPath,CephFS)</li>
</ul>
<p>storageClassName 动态供应</p>
<h3 id="projected-volume">Projected Volume<a hidden class="anchor" aria-hidden="true" href="#projected-volume">#</a></h3>
<p>投影卷，聚合多种资源，统一挂载路径</p>
<ul>
<li>secret</li>
<li>configMap</li>
<li>downardAPI</li>
<li>serviceAccountToken</li>
</ul>
<h2 id="权限">权限<a hidden class="anchor" aria-hidden="true" href="#权限">#</a></h2>
<h3 id="security-context">Security Context<a hidden class="anchor" aria-hidden="true" href="#security-context">#</a></h3>
<p>securityContext 控制容器中运行用户、组、文件系统权限</p>
<ul>
<li>runAsUser：容器进程的用户ID</li>
<li>runAsGroup：容器进程的主要组ID</li>
<li>fsGroup：卷的文件系统组ID</li>
<li>supplementalGroups：附加组</li>
</ul>
<h3 id="service-accounts">Service Accounts<a hidden class="anchor" aria-hidden="true" href="#service-accounts">#</a></h3>
<p>Pod 中的应用程序与 K8s API 交互；每个 namespace 都有一个 default 用户</p>
<p>为 Pod 提供精细的 API 访问权限(特定权限)</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/041traefik/">
    <span class="title">« 上一页</span>
    <br>
    <span>K3sEP13——遇到的Traedfik问题</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/039mit6.824lab1/">
    <span class="title">下一页 »</span>
    <br>
    <span>Mit6.824Lab1流程梳理</span>
  </a>
</nav>

  </footer><div id="tw-comment"></div>

<script>

    

    const getStoredTheme = () => localStorage.getItem("pref-theme") === "light" ? "light" : "dark";

    const setGiscusTheme = () => {

        const sendMessage = (message) => {

            const iframe = document.querySelector('iframe.giscus-frame');

            if (iframe) {

                iframe.contentWindow.postMessage({giscus: message}, 'https://giscus.app');

            }

        }

        sendMessage({setConfig: {theme: getStoredTheme()}})

    }


    document.addEventListener("DOMContentLoaded", () => {

        const giscusAttributes = {

            "src": "https://giscus.app/client.js",

            "data-repo": "LTXWorld\/LTXWorld.github.io",

            "data-repo-id": "R_kgDONODUuA",

            "data-category": "Announcements",

            "data-category-id": "DIC_kwDONODUuM4CkMUw",

            "data-mapping": "pathname",

            "data-strict": "0",

            "data-reactions-enabled": "1",

            "data-emit-metadata": "0",

            "data-input-position": "bottom",

            "data-theme": getStoredTheme(),

            "data-lang": "zh-CN",

            "data-loading": "lazy",

            "crossorigin": "anonymous",

        };


        

        const giscusScript = document.createElement("script");

        Object.entries(giscusAttributes).forEach(

                ([key, value]) => giscusScript.setAttribute(key, value));

        document.querySelector("#tw-comment").appendChild(giscusScript);


        

        const themeSwitcher = document.querySelector("#theme-toggle");

        if (themeSwitcher) {

            themeSwitcher.addEventListener("click", setGiscusTheme);

        }

        const themeFloatSwitcher = document.querySelector("#theme-toggle-float");

        if (themeFloatSwitcher) {

            themeFloatSwitcher.addEventListener("click", setGiscusTheme);

        }

    });

</script>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://LTXWorld.github.io/">©2025 LTX&rsquo;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
