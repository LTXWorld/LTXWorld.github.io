<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>K3sEP09â€”â€”åˆå§‹åŒ–å¼€å‘æ¿ç¯å¢ƒæ“ä½œæ±‡æ€» | LTX&#39;s Blog</title>
<meta name="keywords" content="K3s, Linuxæ“ä½œ, RiscV">
<meta name="description" content="å‰ç»
æœ¬æ–‡ä¸ºäº†æ€»ç»“åœ¨æ‹¿åˆ°ä¸€ä¸ªæ–°çš„å¼€å‘æ¿åå…·ä½“è¯¥å¦‚ä½•æ“ä½œ,åŒ…æ‹¬çƒ§å½•é•œåƒ,é…ç½® k3s æ‰€éœ€ç¯å¢ƒç­‰æ“ä½œ.
çƒ§å½•é•œåƒ
å…³äºçƒ§å½•æ“ä½œ,æ— éœ€å¤šè¨€,è¯·å…³æ³¨è¿™ç¯‡æ–‡ç« .æœ¬æ–‡ä¸»è¦è¯´ä¸€ä¸‹é•œåƒé—®é¢˜.
åœ¨é€‰æ‹© OS é•œåƒçš„æ—¶å€™,ç”±äº riscv çš„å®éªŒæ€§,å¾€å¾€åœ¨é˜¿é‡Œäº‘ã€æ¸…åæºç­‰çŸ¥åé•œåƒæºå¹¶æ²¡æœ‰æä¾›,é€šå¸¸æ˜¯ä¸­ç§‘é™¢è‡ªå·±çš„é•œåƒæº,è€Œæœ‰æ—¶æœ‰äº›é•œåƒå¹¶æ²¡æœ‰è¿›è¡Œç¨³å®šçš„ç»´æŠ¤;
ç”šè‡³æœ‰çš„é•œåƒè´¨é‡å¹¶ä¸å¥½,ä¾‹å¦‚ openEuler24 LTS ç«Ÿç„¶ä¸æä¾› wifi æ¨¡å—.ğŸ˜‡">
<meta name="author" content="LTX">
<link rel="canonical" href="https://LTXWorld.github.io/posts/034k3sep09%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E5%BC%80%E5%8F%91%E6%9D%BF%E7%8E%AF%E5%A2%83%E6%B1%87%E6%80%BB/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.dddcf8236b9dfa07cf7fc41c31965e89e4a220be850d3a2a97c6101480c078a9.css" integrity="sha256-3dz4I2ud&#43;gfPf8QcMZZeieSiIL6FDToql8YQFIDAeKk=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://LTXWorld.github.io/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://LTXWorld.github.io/favicon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://LTXWorld.github.io/favicon.png">
<link rel="apple-touch-icon" href="https://LTXWorld.github.io/favicon.png">
<link rel="mask-icon" href="https://LTXWorld.github.io/favicon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://LTXWorld.github.io/posts/034k3sep09%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E5%BC%80%E5%8F%91%E6%9D%BF%E7%8E%AF%E5%A2%83%E6%B1%87%E6%80%BB/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
<script type="text/javascript"

        async

        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">

MathJax.Hub.Config({

  tex2jax: {

    inlineMath: [['$','$'], ['\\(','\\)']],

    displayMath: [['$$','$$'], ['\[\[','\]\]']],

    processEscapes: true,

    processEnvironments: true,

    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],

    TeX: { equationNumbers: { autoNumber: "AMS" },

         extensions: ["AMSmath.js", "AMSsymbols.js"] }

  }

});


MathJax.Hub.Queue(function() {

    

    

    

    var all = MathJax.Hub.getAllJax(), i;

    for(i = 0; i < all.length; i += 1) {

        all[i].SourceElement().parentNode.className += ' has-jax';

    }

});

</script>


<style>

code.has-jax {

    font: inherit;

    font-size: 100%;

    background: inherit;

    border: inherit;

    color: #515151;

}

</style><meta property="og:url" content="https://LTXWorld.github.io/posts/034k3sep09%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E5%BC%80%E5%8F%91%E6%9D%BF%E7%8E%AF%E5%A2%83%E6%B1%87%E6%80%BB/">
  <meta property="og:site_name" content="LTX&#39;s Blog">
  <meta property="og:title" content="K3sEP09â€”â€”åˆå§‹åŒ–å¼€å‘æ¿ç¯å¢ƒæ“ä½œæ±‡æ€»">
  <meta property="og:description" content="å‰ç» æœ¬æ–‡ä¸ºäº†æ€»ç»“åœ¨æ‹¿åˆ°ä¸€ä¸ªæ–°çš„å¼€å‘æ¿åå…·ä½“è¯¥å¦‚ä½•æ“ä½œ,åŒ…æ‹¬çƒ§å½•é•œåƒ,é…ç½® k3s æ‰€éœ€ç¯å¢ƒç­‰æ“ä½œ.
çƒ§å½•é•œåƒ å…³äºçƒ§å½•æ“ä½œ,æ— éœ€å¤šè¨€,è¯·å…³æ³¨è¿™ç¯‡æ–‡ç« .æœ¬æ–‡ä¸»è¦è¯´ä¸€ä¸‹é•œåƒé—®é¢˜.
åœ¨é€‰æ‹© OS é•œåƒçš„æ—¶å€™,ç”±äº riscv çš„å®éªŒæ€§,å¾€å¾€åœ¨é˜¿é‡Œäº‘ã€æ¸…åæºç­‰çŸ¥åé•œåƒæºå¹¶æ²¡æœ‰æä¾›,é€šå¸¸æ˜¯ä¸­ç§‘é™¢è‡ªå·±çš„é•œåƒæº,è€Œæœ‰æ—¶æœ‰äº›é•œåƒå¹¶æ²¡æœ‰è¿›è¡Œç¨³å®šçš„ç»´æŠ¤; ç”šè‡³æœ‰çš„é•œåƒè´¨é‡å¹¶ä¸å¥½,ä¾‹å¦‚ openEuler24 LTS ç«Ÿç„¶ä¸æä¾› wifi æ¨¡å—.ğŸ˜‡">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-05-14T09:37:37+08:00">
    <meta property="article:modified_time" content="2025-05-14T09:37:37+08:00">
    <meta property="article:tag" content="K3s">
    <meta property="article:tag" content="Linuxæ“ä½œ">
    <meta property="article:tag" content="RiscV">
      <meta property="og:image" content="https://LTXWorld.github.io/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://LTXWorld.github.io/images/papermod-cover.png">
<meta name="twitter:title" content="K3sEP09â€”â€”åˆå§‹åŒ–å¼€å‘æ¿ç¯å¢ƒæ“ä½œæ±‡æ€»">
<meta name="twitter:description" content="å‰ç»
æœ¬æ–‡ä¸ºäº†æ€»ç»“åœ¨æ‹¿åˆ°ä¸€ä¸ªæ–°çš„å¼€å‘æ¿åå…·ä½“è¯¥å¦‚ä½•æ“ä½œ,åŒ…æ‹¬çƒ§å½•é•œåƒ,é…ç½® k3s æ‰€éœ€ç¯å¢ƒç­‰æ“ä½œ.
çƒ§å½•é•œåƒ
å…³äºçƒ§å½•æ“ä½œ,æ— éœ€å¤šè¨€,è¯·å…³æ³¨è¿™ç¯‡æ–‡ç« .æœ¬æ–‡ä¸»è¦è¯´ä¸€ä¸‹é•œåƒé—®é¢˜.
åœ¨é€‰æ‹© OS é•œåƒçš„æ—¶å€™,ç”±äº riscv çš„å®éªŒæ€§,å¾€å¾€åœ¨é˜¿é‡Œäº‘ã€æ¸…åæºç­‰çŸ¥åé•œåƒæºå¹¶æ²¡æœ‰æä¾›,é€šå¸¸æ˜¯ä¸­ç§‘é™¢è‡ªå·±çš„é•œåƒæº,è€Œæœ‰æ—¶æœ‰äº›é•œåƒå¹¶æ²¡æœ‰è¿›è¡Œç¨³å®šçš„ç»´æŠ¤;
ç”šè‡³æœ‰çš„é•œåƒè´¨é‡å¹¶ä¸å¥½,ä¾‹å¦‚ openEuler24 LTS ç«Ÿç„¶ä¸æä¾› wifi æ¨¡å—.ğŸ˜‡">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://LTXWorld.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "K3sEP09â€”â€”åˆå§‹åŒ–å¼€å‘æ¿ç¯å¢ƒæ“ä½œæ±‡æ€»",
      "item": "https://LTXWorld.github.io/posts/034k3sep09%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E5%BC%80%E5%8F%91%E6%9D%BF%E7%8E%AF%E5%A2%83%E6%B1%87%E6%80%BB/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "K3sEP09â€”â€”åˆå§‹åŒ–å¼€å‘æ¿ç¯å¢ƒæ“ä½œæ±‡æ€»",
  "name": "K3sEP09â€”â€”åˆå§‹åŒ–å¼€å‘æ¿ç¯å¢ƒæ“ä½œæ±‡æ€»",
  "description": "å‰ç» æœ¬æ–‡ä¸ºäº†æ€»ç»“åœ¨æ‹¿åˆ°ä¸€ä¸ªæ–°çš„å¼€å‘æ¿åå…·ä½“è¯¥å¦‚ä½•æ“ä½œ,åŒ…æ‹¬çƒ§å½•é•œåƒ,é…ç½® k3s æ‰€éœ€ç¯å¢ƒç­‰æ“ä½œ.\nçƒ§å½•é•œåƒ å…³äºçƒ§å½•æ“ä½œ,æ— éœ€å¤šè¨€,è¯·å…³æ³¨è¿™ç¯‡æ–‡ç« .æœ¬æ–‡ä¸»è¦è¯´ä¸€ä¸‹é•œåƒé—®é¢˜.\nåœ¨é€‰æ‹© OS é•œåƒçš„æ—¶å€™,ç”±äº riscv çš„å®éªŒæ€§,å¾€å¾€åœ¨é˜¿é‡Œäº‘ã€æ¸…åæºç­‰çŸ¥åé•œåƒæºå¹¶æ²¡æœ‰æä¾›,é€šå¸¸æ˜¯ä¸­ç§‘é™¢è‡ªå·±çš„é•œåƒæº,è€Œæœ‰æ—¶æœ‰äº›é•œåƒå¹¶æ²¡æœ‰è¿›è¡Œç¨³å®šçš„ç»´æŠ¤; ç”šè‡³æœ‰çš„é•œåƒè´¨é‡å¹¶ä¸å¥½,ä¾‹å¦‚ openEuler24 LTS ç«Ÿç„¶ä¸æä¾› wifi æ¨¡å—.ğŸ˜‡\n",
  "keywords": [
    "K3s", "Linuxæ“ä½œ", "RiscV"
  ],
  "articleBody": "å‰ç» æœ¬æ–‡ä¸ºäº†æ€»ç»“åœ¨æ‹¿åˆ°ä¸€ä¸ªæ–°çš„å¼€å‘æ¿åå…·ä½“è¯¥å¦‚ä½•æ“ä½œ,åŒ…æ‹¬çƒ§å½•é•œåƒ,é…ç½® k3s æ‰€éœ€ç¯å¢ƒç­‰æ“ä½œ.\nçƒ§å½•é•œåƒ å…³äºçƒ§å½•æ“ä½œ,æ— éœ€å¤šè¨€,è¯·å…³æ³¨è¿™ç¯‡æ–‡ç« .æœ¬æ–‡ä¸»è¦è¯´ä¸€ä¸‹é•œåƒé—®é¢˜.\nåœ¨é€‰æ‹© OS é•œåƒçš„æ—¶å€™,ç”±äº riscv çš„å®éªŒæ€§,å¾€å¾€åœ¨é˜¿é‡Œäº‘ã€æ¸…åæºç­‰çŸ¥åé•œåƒæºå¹¶æ²¡æœ‰æä¾›,é€šå¸¸æ˜¯ä¸­ç§‘é™¢è‡ªå·±çš„é•œåƒæº,è€Œæœ‰æ—¶æœ‰äº›é•œåƒå¹¶æ²¡æœ‰è¿›è¡Œç¨³å®šçš„ç»´æŠ¤; ç”šè‡³æœ‰çš„é•œåƒè´¨é‡å¹¶ä¸å¥½,ä¾‹å¦‚ openEuler24 LTS ç«Ÿç„¶ä¸æä¾› wifi æ¨¡å—.ğŸ˜‡\næ‰€ä»¥ç»è¿‡æˆ‘çš„å¤šæ¬¡å°è¯•(é‡æ–°çƒ§å½•é•œåƒé…ç½®ç¯å¢ƒçš„æŠ˜ç£¨)æˆ‘æ‰¾åˆ°äº†ä¸€æ¬¾é€‚åˆå®éªŒç¨³å®š(æš‚æ—¶ç¨³å®š)æ“ä½œçš„ OS é•œåƒ,RevyOS\nå…¶é€‚é…äº† LicheePi 4A å’Œ Milk-V Meles æ­£å¥½éƒ½æ˜¯æˆ‘æ‰‹ä¸Šæœ‰çš„è®¾å¤‡;è™½ç„¶åŒæ ·ä½¿ç”¨çš„æ˜¯ä¸­ç§‘é™¢çš„é•œåƒç®¡ç†,ä½†æ˜¯æ®æˆ‘åœ¨å…¶ github é¡µé¢çš„è§‚å¯Ÿ,å…¶ issue çš„æ—¶é—´åœ¨æœ€è¿‘è¾ƒå¤š,å›å¤ä¹Ÿè›®åŠæ—¶; åŒæ—¶ ChangeLog ä¹Ÿæœ‰ç¨³å®šçš„æ›´æ–°,æ•…ä»¥æ­¤ä¸ºåç»­çš„å®éªŒé•œåƒ.\nç¯å¢ƒæ­å»º ä¸æˆ‘ä»¬ä¹‹å‰æƒ³çš„ä¸€æ ·,å°±åƒå®å¡”è¿™æ ·çš„è½¯ä»¶æä¾›äº†ä¸€é”®éƒ¨ç½²,ä¸€é”®é…ç½®è¿™æ ·çš„æ“ä½œ,è¿™å¯¹é‡æ–°æ„å»ºä¸€ä¸ªå¼€å‘æ¿ä¸Šçš„ç³»ç»Ÿæ¥è¯´çœŸçš„æ˜¯å¾ˆæ–¹ä¾¿;æœ‰æœºä¼šæˆ‘ä»¬å¯ä»¥æŠŠä¸‹é¢çš„æ“ä½œå…¨éƒ¨æ”¾åœ¨ä¸€ä¸ªè„šæœ¬ä¸­,ä¹Ÿåšåˆ°ä¸€é”®æ“ä½œ.\nåœ¨ç¬¬äºŒç¯‡æ–‡ç« ä¸­æˆ‘ä»¬è¯´è¿‡äº†å¦‚ä½•é…ç½®é€‚åˆå®¹å™¨çš„ OS ç¯å¢ƒ, ä½†æ˜¯åé¢åœ¨å®éªŒä¸­è¿˜æ˜¯é‡åˆ°äº†äº›é—®é¢˜,æ‰€ä»¥è¿™é‡Œé‡æ–°æ±‡æ€»ä¸€ä¸‹.(å¹¶ä¸”åœ¨å®éªŒè¿‡ç¨‹ä¸­æœ¬æ–‡ä¼šä¸€ç›´æ›´æ–°)\næ›´æ”¹ DNS é…ç½® å¦‚æœä½ çš„ DNS æœåŠ¡å™¨åœ°å€æ— æ³•æ­£ç¡®è§£æ,è¯·ä¿®æ”¹ DNS è®¾ç½®ä¸º 8.8.8.8,1.1.1.1ç­‰é™æ€å…¬ç”¨åœ°å€\n# æ¢æˆè‡ªå·±çš„ç½‘ç»œåç§° sudo nmcli connection modify \"niuma\" ipv4.ignore-auto-dns yes ipv4.dns \"8.8.8.8 1.1.1.1\" # é‡å¯è¿æ¥ sudo nmcli connection down \"niuma\" \u0026\u0026 nmcli connection up \"niuma\" æ³¨æ„,å¦‚æœä½ æ˜¯åœ¨ ssh æˆ–è€…å…¶ä»–è¿œç¨‹è¿æ¥ç¯å¢ƒä¸‹è¿›è¡Œè¿™æ­¥æ“ä½œ,é‚£ä¹ˆåç»­ä¼šå› ä¸º wifi æ–­å¼€è€Œæ— æ³•è¿æ¥,æ‰€ä»¥æˆ‘ä»¬æ¨èæ‰§è¡Œè¿™æ­¥æ“ä½œåœ¨æœ‰æ˜¾ç¤ºå™¨çš„ç¯å¢ƒä¸‹è¿›è¡Œ.\nApt æˆªæ­¢2025.05.13,ä¸­ç§‘é™¢ä»“åº“å­˜åœ¨ KEY è¿‡æœŸé—®é¢˜,å®˜æ–¹ç»™å‡ºäº†è§£å†³æ–¹æ¡ˆ\næˆ‘é‡‡ç”¨çš„æ˜¯ ChatGPT ç»™å‡ºçš„æ–¹æ¡ˆ,åœ¨æºåœ°å€å‰é¢åŠ ä¸Š[trusted=yes],\nsudo vi /etc/apt/sources.list æœ€ç»ˆç»“æœå¦‚ä¸‹:\ndeb [trusted=yes] https://fast-mirror.isrc.ac.cn/revyos/revyos-gles-21 revyos-gles-21 main deb [trusted=yes] https://fast-mirror.isrc.ac.cn/revyos/revyos-addons revyos-addons main deb [trusted=yes] https://fast-mirror.isrc.ac.cn/revyos/revyos-kernels revyos-kernels main deb [trusted=yes] https://fast-mirror.isrc.ac.cn/revyos/revyos-base sid main ä¹‹åå†è¿›è¡Œ apt æ“ä½œå°±å¯ä»¥äº†.(æ›´æ–°,åç»­è¿˜æ˜¯å»ºè®®ä½¿ç”¨å®˜æ–¹çš„è§£å†³æ–¹æ¡ˆ)\nsudo sh -c 'gpg --keyserver keyserver.ubuntu.com --recv-keys 2FB3A9E77911527E \u0026\u0026 \\ gpg --export 2FB3A9E77911527E \u003e /etc/apt/trusted.gpg.d/revyos-keyring.gpg' sudo apt update; sudo apt upgrade -y åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ° gpg: keyserver receive failed: Server indicated a failureè¿™ä¸ªé—®é¢˜,é€šå¸¸æ˜¯ç½‘ç»œé—®é¢˜,æˆ‘ä»¬éœ€è¦å…ˆæ›´æ”¹ DNS,å…·ä½“è§ä¸Šæ–¹ DNS æ“ä½œ.\nGCCç­‰æ„å»ºæ‰€éœ€å·¥å…· æˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬æ¥ä¸€é”®æ£€æµ‹å¹¶å®‰è£…å¯èƒ½æ‰€éœ€çš„å·¥å…·.\n#!/bin/bash set -e echo \"ğŸ” æ£€æµ‹å½“å‰ç³»ç»ŸåŒ…ç®¡ç†å™¨...\" if command -v apt \u003e/dev/null 2\u003e\u00261; then echo \"âœ… ä½¿ç”¨ apt å®‰è£…ä¾èµ–...\" sudo apt update sudo apt install -y \\ build-essential \\ make \\ gcc \\ git \\ curl \\ pkg-config \\ libseccomp-dev \\ btrfs-progs \\ iptables \\ libapparmor-dev \\ libgpgme-dev \\ libdevmapper-dev \\ libprotobuf-dev \\ protobuf-compiler \\ libnl-3-dev \\ libnl-route-3-dev \\ libnet-dev \\ libudev-dev \\ libsystemd-dev \\ libtool \\ autoconf \\ automake \\ rsync \\ unzip \\ zstd \\ socat elif command -v dnf \u003e/dev/null 2\u003e\u00261; then echo \"âœ… ä½¿ç”¨ dnf å®‰è£…ä¾èµ–...\" sudo dnf install -y \\ gcc \\ gcc-c++ \\ git \\ make \\ curl \\ pkgconf-pkg-config \\ libseccomp-devel \\ btrfs-progs-devel \\ iptables \\ libapparmor-devel \\ gpgme-devel \\ device-mapper-devel \\ protobuf-devel \\ protobuf-compiler \\ libnl3-devel \\ libnet-devel \\ systemd-devel \\ libudev-devel \\ libtool \\ autoconf \\ automake \\ rsync \\ unzip \\ socat else echo \"âŒ æ— æ³•è¯†åˆ«çš„åŒ…ç®¡ç†å™¨ï¼Œè¯·æ‰‹åŠ¨å®‰è£…ä¾èµ–ã€‚\" exit 1 fi echo \"âœ… æ‰€æœ‰ä¾èµ–å®‰è£…å®Œæ¯•ã€‚ä½ ç°åœ¨å¯ä»¥æ„å»º K3sã€‚\" æ­¤è„šæœ¬æ¥è‡ªäº ChatGPT.\nGit apt å®‰è£… Git,å¹¶é…ç½®é•œåƒåœ°å€\ngit config --global url.\"https://gh-proxy.com/github.com/\" .insteadOf \"https://github.com/\" cat .gitconfig å¾—åˆ°æˆ‘ä»¬æ‰€é…ç½®çš„åœ°å€å³ä¸ºæ­£ç¡®.\nDocker ç¬¬ä¸€ç§å®‰è£…æ–¹å¼:\nsudo apt install docker.io sudo usermod -aG docker $USER å¦‚æœè¿™ç§ä¸è¡Œ,è¯·ä½¿ç”¨è¿™ç§:(åé¢çš„åŠ å…¥ root ç»„æ“ä½œæ˜¯ç›¸åŒçš„)\nsudo apt-get install docker docker-compose sudo groupadd docker sudo usermod -aG docker $USER newgrp docker æœ€ç»ˆæ‰§è¡Œ docker images hello-world æ£€æµ‹æ˜¯å¦æˆåŠŸ.\né…ç½®ä»£ç†é•œåƒ:()\n# ä¿®æ”¹ vi /etc/docker/daemon.json # å¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œè‡ªå·±æ‰‹åŠ¨æ–°å»ºï¼ˆæˆ‘å½“æ—¶åªæœ‰ä¸€ä¸ªkey.jsonæ–‡ä»¶ï¼‰ # å°†ä¸‹é¢å†…å®¹å¤åˆ¶è¿›å» { \"registry-mirrors\": [ \"https://docker.1ms.run\", \"https://docker.linkedbus.com\" ] } # åŠ è½½é…ç½®å¹¶é‡å¯ sudo systemctl daemon-reload sudo systemctl restart docker # å°è¯•æ‹‰å–é•œåƒ docker pull busybox docker run hello-world æ³¨æ„,è¿™é‡Œçš„ä»£ç†æ˜¯å¯¹ dockerhub çš„ä»£ç†;ä¸ä¼šå½±å“åˆ°æˆ‘ä»¬çš„ç§æœ‰ä»“åº“. ğŸ¥¸ å¯¹äº†,fk GFW ! å¦‚æœå½±å“åˆ°äº†ç§æœ‰ä»“åº“,è¯·æš‚æ—¶æ”¾å¼ƒä»£ç†.\nGolang è¿™é‡Œæˆ‘ä»¬ç»Ÿä¸€é‡‡ç”¨ go1.22.8 linux/riscv64 è¿™ä¸ªç‰ˆæœ¬.åŸå› è§è¿™ç¯‡æ–‡ç« ,æ ¹æ®å½“å‰ä½ çš„ k8s ç‰ˆæœ¬è¿›è¡Œå¯¹åº”å˜åŒ–.\nè¿™é‡Œé»˜è®¤ä½ å·²ç»æœ‰äº†æ­¤ç‰ˆæœ¬çš„ tar æ–‡ä»¶(æˆ‘æ˜¯é€šè¿‡ scp ä¼ è¿‡å»çš„)\nsudo tar -C /usr/local -xzf go1.22.8.linux-riscv64.tar.gz sudo vi ~/.bashrc # Go environment export GOROOT=/usr/local/go export PATH=$GOROOT/bin:$PATH export GOPATH=$HOME/go export PATH=$GOPATH/bin:$PATH export GOPROXY=https://goproxy.cn,direct # source ~/.bashrc ä½¿ç”¨ go version æ£€æŸ¥å¾—åˆ° go1.22.8 è¿™ä¸ªæ­£ç¡®ç‰ˆæœ¬.\nyq ç”¨æ¥è§£æ YAML çš„å·¥å…·,ä¹‹å‰æ–‡ç« ä¸­ä¹Ÿæåˆ°è¿‡.\nè¿™é‡Œæˆ‘ä»¬ä¸ Golang ä¸€æ ·,ä»æºç æ„å»º,å› ä¸ºåŒ…ç®¡ç†ä¸­çš„ç‰ˆæœ¬å¤ªè€.\nwget https://github.com/mikefarah/yq/releases/download/v4.44.6/yq_linux_riscv64.tar.gz tar -zvxf yq_linux_riscv64.tar.gz mv yq_linux_riscv64.tar.gz yq chmod +x yq mv yq /usr/local/bin yq --version å¦‚æœä½ ä¹‹å‰ç”¨ apt å®‰è£…äº† yq,å¯èƒ½ä¼šå­˜åœ¨é”™è¯¯çš„ç¼“å­˜,å¯ä»¥ç”¨hash -ræ¸…ç†ç¼“å­˜.\næƒé™é—®é¢˜ ä¸ºäº†æ–¹ä¾¿å’Œé¿å…å¯èƒ½å‡ºç°çš„æƒé™é—®é¢˜,æˆ‘ä»¬ä¸ºæºç ç›®å½•èµ‹äºˆ root æƒé™\nsudo chown -R $(whoami):$(whoami) . è®¿é—®ä»“åº“ç½‘ç»œé—®é¢˜ å¦‚æœæˆ‘ä»¬è®¿é—®è‡ªå·±çš„ç§æœ‰ä»“åº“æ—¶é‡åˆ°ç½‘ç»œé—®é¢˜,ç‰¹åˆ«æ˜¯ DNS è§£æé—®é¢˜,é€šå¸¸æ˜¯å› ä¸º Network Management è‡ªåŠ¨ä¸ºæˆ‘ä»¬è®¾ç½®å¥½äº† DNS æœåŠ¡å™¨åœ°å€.\nè€Œè¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬è°ˆåˆ°äº†è¿™äº› DNS æœåŠ¡å™¨å¾ˆéš¾ä¸å‡ºé—®é¢˜,ç‰¹åˆ«æ˜¯åœ¨è§£æå›½å¤–çš„æœåŠ¡å™¨æ—¶.\næ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨ä¸€ä¸ªæœ€ç®€å•çš„æ–¹æ³•,ä¿®æ”¹ /etc/hosts æ–‡ä»¶,å°†æœåŠ¡å™¨çš„ IP åŠ å…¥å…¶ä¸­.\n# è¯·æ¢æˆè‡ªå·±çš„ ip ä¸ åŸŸå IP Domain å®‰è£…ä¸å¸è½½è„šæœ¬ å®éªŒè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°é—®é¢˜å¯¼è‡´ k3s ä¸èƒ½è¿è¡Œ,åœ¨æ­¤æƒ…å†µä¸‹å¦‚æœæˆ‘ä»¬éœ€è¦åˆ é™¤ k3s æˆ–è€…é‡æ–°å®‰è£… k3s,è¿™é‡Œç»™å‡ºä¸¤ç§æ“ä½œçš„è„šæœ¬.\nå¸è½½è„šæœ¬ å°†å…¶ä» systemd ç®¡ç†ä¸­ç§»é™¤.\n#!/bin/bash set -e echo \"ğŸ”§ åœæ­¢ k3s æœåŠ¡ï¼ˆå¦‚åœ¨è¿è¡Œï¼‰...\" sudo systemctl stop k3s || true echo \"ğŸš« ç¦ç”¨ k3s æœåŠ¡å¼€æœºè‡ªå¯...\" sudo systemctl disable k3s || true echo \"ğŸ§¹ åˆ é™¤ k3s systemd æœåŠ¡æ–‡ä»¶...\" sudo rm -f /etc/systemd/system/k3s.service sudo rm -f /etc/systemd/system/k3s.service.env echo \"ğŸ”„ é‡æ–°åŠ è½½ systemd å®ˆæŠ¤è¿›ç¨‹...\" sudo systemctl daemon-reload echo \"âœ… éªŒè¯ k3s æœåŠ¡æ˜¯å¦å·²æ¸…é™¤...\" sudo systemctl status k3s || echo \"âœ… k3s.service å·²è¢«æˆåŠŸç§»é™¤ã€‚\" echo \"ğŸ‰ æ¸…ç†å®Œæˆã€‚\" å®‰è£…è„šæœ¬ å°†å…¶é‡æ–°åŠ å…¥ systemd ç®¡ç†,å‰ææ˜¯è„šæœ¬æ‰€åœ¨è·¯å¾„ä¸ k3s äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„ä¸€è‡´,ä¸ä¸€è‡´è¯·ä¿®æ”¹è„šæœ¬.\n#!/bin/bash set -e echo \"ğŸ“¦ æ‹·è´æœ¬åœ° k3s åˆ° /usr/local/bin ...\" sudo cp /home/debian/k3s /usr/local/bin/k3s sudo chmod +x /usr/local/bin/k3s echo \"ğŸ”§ é…ç½®ç§æœ‰é•œåƒä»“åº“ registries.yaml ...\" sudo mkdir -p /etc/rancher/k3s cat \u003c",
  "wordCount" : "2635",
  "inLanguage": "zh",
  "image": "https://LTXWorld.github.io/images/papermod-cover.png","datePublished": "2025-05-14T09:37:37+08:00",
  "dateModified": "2025-05-14T09:37:37+08:00",
  "author":{
    "@type": "Person",
    "name": "LTX"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://LTXWorld.github.io/posts/034k3sep09%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E5%BC%80%E5%8F%91%E6%9D%BF%E7%8E%AF%E5%A2%83%E6%B1%87%E6%80%BB/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "LTX's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://LTXWorld.github.io/favicon.png"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://LTXWorld.github.io/" accesskey="h" title="LTX&#39;s Blog (Alt + H)">LTX&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://LTXWorld.github.io/" title="LTX&#39;s Blog">
                    <span>é¦–é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://LTXWorld.github.io/archives/" title="å½’æ¡£">
                    <span>å½’æ¡£</span>
                </a>
            </li>
            <li>
                <a href="https://LTXWorld.github.io/categories/" title="Categories">
                    <span>åˆ†ç±»</span>
                </a>
            </li>
            <li>
                <a href="https://LTXWorld.github.io/tags/" title="Tags">
                    <span>æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://LTXWorld.github.io/search/" title="æœç´¢">
                    <span>æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="https://LTXWorld.github.io/about/" title="åèŠ±å›­">
                    <span>å…³äº</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      K3sEP09â€”â€”åˆå§‹åŒ–å¼€å‘æ¿ç¯å¢ƒæ“ä½œæ±‡æ€»
    </h1>
    <div class="post-meta"><span title='2025-05-14 09:37:37 +0800 CST'>äº”æœˆ 14, 2025</span>&nbsp;Â·&nbsp;6 åˆ†é’Ÿ&nbsp;Â·&nbsp;LTX

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">ç›®å½•</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%89%8d%e7%9e%bb" aria-label="å‰ç»">å‰ç»</a></li>
                <li>
                    <a href="#%e7%83%a7%e5%bd%95%e9%95%9c%e5%83%8f" aria-label="çƒ§å½•é•œåƒ">çƒ§å½•é•œåƒ</a></li>
                <li>
                    <a href="#%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba" aria-label="ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º</a><ul>
                        
                <li>
                    <a href="#%e6%9b%b4%e6%94%b9-dns-%e9%85%8d%e7%bd%ae" aria-label="æ›´æ”¹ DNS é…ç½®">æ›´æ”¹ DNS é…ç½®</a></li>
                <li>
                    <a href="#apt" aria-label="Apt">Apt</a></li>
                <li>
                    <a href="#gcc%e7%ad%89%e6%9e%84%e5%bb%ba%e6%89%80%e9%9c%80%e5%b7%a5%e5%85%b7" aria-label="GCCç­‰æ„å»ºæ‰€éœ€å·¥å…·">GCCç­‰æ„å»ºæ‰€éœ€å·¥å…·</a></li>
                <li>
                    <a href="#git" aria-label="Git">Git</a></li>
                <li>
                    <a href="#docker" aria-label="Docker">Docker</a></li>
                <li>
                    <a href="#golang" aria-label="Golang">Golang</a></li>
                <li>
                    <a href="#yq" aria-label="yq">yq</a></li>
                <li>
                    <a href="#%e6%9d%83%e9%99%90%e9%97%ae%e9%a2%98" aria-label="æƒé™é—®é¢˜">æƒé™é—®é¢˜</a></li>
                <li>
                    <a href="#%e8%ae%bf%e9%97%ae%e4%bb%93%e5%ba%93%e7%bd%91%e7%bb%9c%e9%97%ae%e9%a2%98" aria-label="è®¿é—®ä»“åº“ç½‘ç»œé—®é¢˜">è®¿é—®ä»“åº“ç½‘ç»œé—®é¢˜</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e4%b8%8e%e5%8d%b8%e8%bd%bd%e8%84%9a%e6%9c%ac" aria-label="å®‰è£…ä¸å¸è½½è„šæœ¬">å®‰è£…ä¸å¸è½½è„šæœ¬</a><ul>
                        
                <li>
                    <a href="#%e5%8d%b8%e8%bd%bd%e8%84%9a%e6%9c%ac" aria-label="å¸è½½è„šæœ¬">å¸è½½è„šæœ¬</a></li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e8%84%9a%e6%9c%ac" aria-label="å®‰è£…è„šæœ¬">å®‰è£…è„šæœ¬</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%af%b9kubectl%e5%91%bd%e4%bb%a4%e8%bf%9b%e8%a1%8c%e4%bc%98%e5%8c%96" aria-label="å¯¹kubectlå‘½ä»¤è¿›è¡Œä¼˜åŒ–">å¯¹kubectlå‘½ä»¤è¿›è¡Œä¼˜åŒ–</a><ul>
                        
                <li>
                    <a href="#%e5%8e%bbsudo%e5%8c%96" aria-label="å»sudoåŒ–">å»sudoåŒ–</a></li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8kubectl-aliases%e7%ae%80%e5%8c%96" aria-label="ä½¿ç”¨kubectl-aliasesç®€åŒ–">ä½¿ç”¨kubectl-aliasesç®€åŒ–</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%90%8e%e7%bb%ad%e6%9b%b4%e6%96%b0" aria-label="åç»­æ›´æ–°">åç»­æ›´æ–°</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="å‰ç»">å‰ç»<a hidden class="anchor" aria-hidden="true" href="#å‰ç»">#</a></h2>
<p>æœ¬æ–‡ä¸ºäº†æ€»ç»“åœ¨æ‹¿åˆ°ä¸€ä¸ªæ–°çš„å¼€å‘æ¿åå…·ä½“è¯¥å¦‚ä½•æ“ä½œ,åŒ…æ‹¬çƒ§å½•é•œåƒ,é…ç½® k3s æ‰€éœ€ç¯å¢ƒç­‰æ“ä½œ.</p>
<h2 id="çƒ§å½•é•œåƒ">çƒ§å½•é•œåƒ<a hidden class="anchor" aria-hidden="true" href="#çƒ§å½•é•œåƒ">#</a></h2>
<p>å…³äºçƒ§å½•æ“ä½œ,æ— éœ€å¤šè¨€,è¯·å…³æ³¨è¿™ç¯‡<a href="https://www.bfsmlt.top/posts/003li_riscv01/">æ–‡ç« </a>.æœ¬æ–‡ä¸»è¦è¯´ä¸€ä¸‹é•œåƒé—®é¢˜.</p>
<p>åœ¨é€‰æ‹© OS é•œåƒçš„æ—¶å€™,ç”±äº riscv çš„å®éªŒæ€§,å¾€å¾€åœ¨é˜¿é‡Œäº‘ã€æ¸…åæºç­‰çŸ¥åé•œåƒæºå¹¶æ²¡æœ‰æä¾›,é€šå¸¸æ˜¯ä¸­ç§‘é™¢è‡ªå·±çš„é•œåƒæº,è€Œæœ‰æ—¶æœ‰äº›é•œåƒå¹¶æ²¡æœ‰è¿›è¡Œç¨³å®šçš„ç»´æŠ¤;
ç”šè‡³æœ‰çš„é•œåƒè´¨é‡å¹¶ä¸å¥½,ä¾‹å¦‚ openEuler24 LTS ç«Ÿç„¶ä¸æä¾› wifi æ¨¡å—.ğŸ˜‡</p>
<p>æ‰€ä»¥ç»è¿‡æˆ‘çš„å¤šæ¬¡å°è¯•(é‡æ–°çƒ§å½•é•œåƒé…ç½®ç¯å¢ƒçš„æŠ˜ç£¨)æˆ‘æ‰¾åˆ°äº†ä¸€æ¬¾é€‚åˆå®éªŒç¨³å®š(æš‚æ—¶ç¨³å®š)æ“ä½œçš„ OS é•œåƒ,<a href="https://docs.revyos.dev/">RevyOS</a></p>
<p>å…¶é€‚é…äº† LicheePi 4A å’Œ Milk-V Meles æ­£å¥½éƒ½æ˜¯æˆ‘æ‰‹ä¸Šæœ‰çš„è®¾å¤‡;è™½ç„¶åŒæ ·ä½¿ç”¨çš„æ˜¯ä¸­ç§‘é™¢çš„é•œåƒç®¡ç†,ä½†æ˜¯æ®æˆ‘åœ¨å…¶ github é¡µé¢çš„è§‚å¯Ÿ,å…¶ issue çš„æ—¶é—´åœ¨æœ€è¿‘è¾ƒå¤š,å›å¤ä¹Ÿè›®åŠæ—¶;
åŒæ—¶ ChangeLog ä¹Ÿæœ‰ç¨³å®šçš„æ›´æ–°,æ•…ä»¥æ­¤ä¸ºåç»­çš„å®éªŒé•œåƒ.</p>
<h2 id="ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º<a hidden class="anchor" aria-hidden="true" href="#ç¯å¢ƒæ­å»º">#</a></h2>
<p>ä¸æˆ‘ä»¬ä¹‹å‰æƒ³çš„ä¸€æ ·,å°±åƒå®å¡”è¿™æ ·çš„è½¯ä»¶æä¾›äº†ä¸€é”®éƒ¨ç½²,ä¸€é”®é…ç½®è¿™æ ·çš„æ“ä½œ,è¿™å¯¹é‡æ–°æ„å»ºä¸€ä¸ªå¼€å‘æ¿ä¸Šçš„ç³»ç»Ÿæ¥è¯´çœŸçš„æ˜¯å¾ˆæ–¹ä¾¿;æœ‰æœºä¼šæˆ‘ä»¬å¯ä»¥æŠŠä¸‹é¢çš„æ“ä½œå…¨éƒ¨æ”¾åœ¨ä¸€ä¸ªè„šæœ¬ä¸­,ä¹Ÿåšåˆ°ä¸€é”®æ“ä½œ.</p>
<p>åœ¨<a href="https://www.bfsmlt.top/posts/004risc-v_deployment/">ç¬¬äºŒç¯‡æ–‡ç« </a>ä¸­æˆ‘ä»¬è¯´è¿‡äº†å¦‚ä½•é…ç½®é€‚åˆå®¹å™¨çš„ OS ç¯å¢ƒ, ä½†æ˜¯åé¢åœ¨å®éªŒä¸­è¿˜æ˜¯é‡åˆ°äº†äº›é—®é¢˜,æ‰€ä»¥è¿™é‡Œé‡æ–°æ±‡æ€»ä¸€ä¸‹.(å¹¶ä¸”åœ¨å®éªŒè¿‡ç¨‹ä¸­æœ¬æ–‡ä¼šä¸€ç›´æ›´æ–°)</p>
<h3 id="æ›´æ”¹-dns-é…ç½®">æ›´æ”¹ DNS é…ç½®<a hidden class="anchor" aria-hidden="true" href="#æ›´æ”¹-dns-é…ç½®">#</a></h3>
<p>å¦‚æœä½ çš„ DNS æœåŠ¡å™¨åœ°å€æ— æ³•æ­£ç¡®è§£æ,è¯·ä¿®æ”¹ DNS è®¾ç½®ä¸º <code>8.8.8.8,1.1.1.1</code>ç­‰é™æ€å…¬ç”¨åœ°å€</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># æ¢æˆè‡ªå·±çš„ç½‘ç»œåç§°</span>
</span></span><span class="line"><span class="cl">sudo nmcli connection modify <span class="s2">&#34;niuma&#34;</span>   ipv4.ignore-auto-dns yes   ipv4.dns <span class="s2">&#34;8.8.8.8 1.1.1.1&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># é‡å¯è¿æ¥</span>
</span></span><span class="line"><span class="cl">sudo nmcli connection down <span class="s2">&#34;niuma&#34;</span> <span class="o">&amp;&amp;</span> nmcli connection up <span class="s2">&#34;niuma&#34;</span>
</span></span></code></pre></div><p>æ³¨æ„,å¦‚æœä½ æ˜¯åœ¨ ssh æˆ–è€…å…¶ä»–è¿œç¨‹è¿æ¥ç¯å¢ƒä¸‹è¿›è¡Œè¿™æ­¥æ“ä½œ,é‚£ä¹ˆåç»­ä¼šå› ä¸º wifi æ–­å¼€è€Œæ— æ³•è¿æ¥,æ‰€ä»¥æˆ‘ä»¬æ¨èæ‰§è¡Œè¿™æ­¥æ“ä½œåœ¨æœ‰æ˜¾ç¤ºå™¨çš„ç¯å¢ƒä¸‹è¿›è¡Œ.</p>
<h3 id="apt">Apt<a hidden class="anchor" aria-hidden="true" href="#apt">#</a></h3>
<p>æˆªæ­¢2025.05.13,ä¸­ç§‘é™¢ä»“åº“å­˜åœ¨ KEY è¿‡æœŸé—®é¢˜,å®˜æ–¹ç»™å‡ºäº†<a href="https://github.com/revyos/revyos/issues/125">è§£å†³æ–¹æ¡ˆ</a></p>
<p>æˆ‘é‡‡ç”¨çš„æ˜¯ ChatGPT ç»™å‡ºçš„æ–¹æ¡ˆ,åœ¨æºåœ°å€å‰é¢åŠ ä¸Š<code>[trusted=yes]</code>,</p>
<p><code>sudo vi /etc/apt/sources.list</code> æœ€ç»ˆç»“æœå¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">deb <span class="o">[</span><span class="nv">trusted</span><span class="o">=</span>yes<span class="o">]</span> https://fast-mirror.isrc.ac.cn/revyos/revyos-gles-21 revyos-gles-21 main
</span></span><span class="line"><span class="cl">deb <span class="o">[</span><span class="nv">trusted</span><span class="o">=</span>yes<span class="o">]</span> https://fast-mirror.isrc.ac.cn/revyos/revyos-addons revyos-addons main
</span></span><span class="line"><span class="cl">deb <span class="o">[</span><span class="nv">trusted</span><span class="o">=</span>yes<span class="o">]</span> https://fast-mirror.isrc.ac.cn/revyos/revyos-kernels revyos-kernels main
</span></span><span class="line"><span class="cl">deb <span class="o">[</span><span class="nv">trusted</span><span class="o">=</span>yes<span class="o">]</span> https://fast-mirror.isrc.ac.cn/revyos/revyos-base sid main
</span></span></code></pre></div><p>ä¹‹åå†è¿›è¡Œ apt æ“ä½œå°±å¯ä»¥äº†.(æ›´æ–°,åç»­è¿˜æ˜¯å»ºè®®ä½¿ç”¨å®˜æ–¹çš„è§£å†³æ–¹æ¡ˆ)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo sh -c <span class="s1">&#39;gpg --keyserver keyserver.ubuntu.com --recv-keys 2FB3A9E77911527E &amp;&amp; \
</span></span></span><span class="line"><span class="cl"><span class="s1">gpg --export 2FB3A9E77911527E &gt; /etc/apt/trusted.gpg.d/revyos-keyring.gpg&#39;</span>
</span></span><span class="line"><span class="cl">sudo apt update<span class="p">;</span> sudo apt upgrade -y
</span></span></code></pre></div><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ° <code>gpg: keyserver receive failed: Server indicated a failure</code>è¿™ä¸ªé—®é¢˜,é€šå¸¸æ˜¯ç½‘ç»œé—®é¢˜,æˆ‘ä»¬éœ€è¦å…ˆæ›´æ”¹ DNS,å…·ä½“è§ä¸Šæ–¹ DNS æ“ä½œ.</p>
<h3 id="gccç­‰æ„å»ºæ‰€éœ€å·¥å…·">GCCç­‰æ„å»ºæ‰€éœ€å·¥å…·<a hidden class="anchor" aria-hidden="true" href="#gccç­‰æ„å»ºæ‰€éœ€å·¥å…·">#</a></h3>
<p>æˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬æ¥ä¸€é”®æ£€æµ‹å¹¶å®‰è£…å¯èƒ½æ‰€éœ€çš„å·¥å…·.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">set</span> -e
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ğŸ” æ£€æµ‹å½“å‰ç³»ç»ŸåŒ…ç®¡ç†å™¨...&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nb">command</span> -v apt &gt;/dev/null 2&gt;<span class="p">&amp;</span>1<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;âœ… ä½¿ç”¨ apt å®‰è£…ä¾èµ–...&#34;</span>
</span></span><span class="line"><span class="cl">    sudo apt update
</span></span><span class="line"><span class="cl">    sudo apt install -y <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        build-essential <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        make <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        gcc <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        git <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        curl <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        pkg-config <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libseccomp-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        btrfs-progs <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        iptables <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libapparmor-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libgpgme-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libdevmapper-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libprotobuf-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        protobuf-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libnl-3-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libnl-route-3-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libnet-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libudev-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libsystemd-dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libtool <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        autoconf <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        automake <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        rsync <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        unzip <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        zstd  <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        socat
</span></span><span class="line"><span class="cl"><span class="k">elif</span> <span class="nb">command</span> -v dnf &gt;/dev/null 2&gt;<span class="p">&amp;</span>1<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;âœ… ä½¿ç”¨ dnf å®‰è£…ä¾èµ–...&#34;</span>
</span></span><span class="line"><span class="cl">    sudo dnf install -y <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        gcc <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        gcc-c++ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        git <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        make <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        curl <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        pkgconf-pkg-config <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libseccomp-devel <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        btrfs-progs-devel <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        iptables <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libapparmor-devel <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        gpgme-devel <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        device-mapper-devel <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        protobuf-devel <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        protobuf-compiler <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libnl3-devel <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libnet-devel <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        systemd-devel <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libudev-devel <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        libtool <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        autoconf <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        automake <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        rsync <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        unzip <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        socat
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;âŒ æ— æ³•è¯†åˆ«çš„åŒ…ç®¡ç†å™¨ï¼Œè¯·æ‰‹åŠ¨å®‰è£…ä¾èµ–ã€‚&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;âœ… æ‰€æœ‰ä¾èµ–å®‰è£…å®Œæ¯•ã€‚ä½ ç°åœ¨å¯ä»¥æ„å»º K3sã€‚&#34;</span>
</span></span></code></pre></div><p>æ­¤è„šæœ¬æ¥è‡ªäº ChatGPT.</p>
<h3 id="git">Git<a hidden class="anchor" aria-hidden="true" href="#git">#</a></h3>
<p>apt å®‰è£… Git,å¹¶é…ç½®é•œåƒåœ°å€</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git config --global url.<span class="s2">&#34;https://gh-proxy.com/github.com/&#34;</span> .insteadOf <span class="s2">&#34;https://github.com/&#34;</span>
</span></span><span class="line"><span class="cl">cat .gitconfig
</span></span></code></pre></div><p>å¾—åˆ°æˆ‘ä»¬æ‰€é…ç½®çš„åœ°å€å³ä¸ºæ­£ç¡®.</p>
<h3 id="docker">Docker<a hidden class="anchor" aria-hidden="true" href="#docker">#</a></h3>
<p>ç¬¬ä¸€ç§å®‰è£…æ–¹å¼:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt install docker.io
</span></span><span class="line"><span class="cl">sudo usermod -aG docker <span class="nv">$USER</span>
</span></span></code></pre></div><p>å¦‚æœè¿™ç§ä¸è¡Œ,è¯·ä½¿ç”¨è¿™ç§:(åé¢çš„åŠ å…¥ root ç»„æ“ä½œæ˜¯ç›¸åŒçš„)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt-get install docker docker-compose
</span></span><span class="line"><span class="cl">sudo groupadd docker
</span></span><span class="line"><span class="cl">sudo usermod -aG docker <span class="nv">$USER</span>
</span></span><span class="line"><span class="cl">newgrp docker
</span></span></code></pre></div><p>æœ€ç»ˆæ‰§è¡Œ <code>docker images hello-world</code> æ£€æµ‹æ˜¯å¦æˆåŠŸ.</p>
<p>é…ç½®ä»£ç†é•œåƒ:()</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ä¿®æ”¹</span>
</span></span><span class="line"><span class="cl">vi /etc/docker/daemon.json
</span></span><span class="line"><span class="cl"><span class="c1"># å¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œè‡ªå·±æ‰‹åŠ¨æ–°å»ºï¼ˆæˆ‘å½“æ—¶åªæœ‰ä¸€ä¸ªkey.jsonæ–‡ä»¶ï¼‰</span>
</span></span><span class="line"><span class="cl"><span class="c1"># å°†ä¸‹é¢å†…å®¹å¤åˆ¶è¿›å»</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;registry-mirrors&#34;</span>: <span class="o">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://docker.1ms.run&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;https://docker.linkedbus.com&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åŠ è½½é…ç½®å¹¶é‡å¯</span>
</span></span><span class="line"><span class="cl">sudo systemctl daemon-reload
</span></span><span class="line"><span class="cl">sudo systemctl restart docker
</span></span><span class="line"><span class="cl"><span class="c1"># å°è¯•æ‹‰å–é•œåƒ</span>
</span></span><span class="line"><span class="cl">docker pull busybox
</span></span><span class="line"><span class="cl">docker run hello-world
</span></span></code></pre></div><p>æ³¨æ„,è¿™é‡Œçš„ä»£ç†æ˜¯å¯¹ dockerhub çš„ä»£ç†;ä¸ä¼šå½±å“åˆ°æˆ‘ä»¬çš„ç§æœ‰ä»“åº“. ğŸ¥¸ å¯¹äº†,fk GFW !
å¦‚æœå½±å“åˆ°äº†ç§æœ‰ä»“åº“,è¯·æš‚æ—¶æ”¾å¼ƒä»£ç†.</p>
<h3 id="golang">Golang<a hidden class="anchor" aria-hidden="true" href="#golang">#</a></h3>
<p>è¿™é‡Œæˆ‘ä»¬ç»Ÿä¸€é‡‡ç”¨ go1.22.8 linux/riscv64 è¿™ä¸ªç‰ˆæœ¬.åŸå› è§<a href="https://www.bfsmlt.top/posts/035k3sep10%E6%88%90%E5%8A%9F%E8%BF%81%E7%A7%BBk3s%E8%87%B3riscv64%E5%BC%80%E5%8F%91%E6%9D%BF%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/#%e9%81%bf%e5%85%8dgolang%e7%89%88%e6%9c%ac%e6%a3%80%e6%b5%8b">è¿™ç¯‡æ–‡ç« </a>,æ ¹æ®å½“å‰ä½ çš„ k8s ç‰ˆæœ¬è¿›è¡Œå¯¹åº”å˜åŒ–.</p>
<p>è¿™é‡Œé»˜è®¤ä½ å·²ç»æœ‰äº†æ­¤ç‰ˆæœ¬çš„ tar æ–‡ä»¶(æˆ‘æ˜¯é€šè¿‡ scp ä¼ è¿‡å»çš„)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo tar -C /usr/local -xzf go1.22.8.linux-riscv64.tar.gz
</span></span><span class="line"><span class="cl">sudo vi ~/.bashrc
</span></span><span class="line"><span class="cl"><span class="c1"># Go environment</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">GOROOT</span><span class="o">=</span>/usr/local/go
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$GOROOT</span>/bin:<span class="nv">$PATH</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">GOPATH</span><span class="o">=</span><span class="nv">$HOME</span>/go
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$GOPATH</span>/bin:<span class="nv">$PATH</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">GOPROXY</span><span class="o">=</span>https://goproxy.cn,direct
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="nb">source</span> ~/.bashrc
</span></span></code></pre></div><p>ä½¿ç”¨ <code>go version</code> æ£€æŸ¥å¾—åˆ° go1.22.8 è¿™ä¸ªæ­£ç¡®ç‰ˆæœ¬.</p>
<h3 id="yq">yq<a hidden class="anchor" aria-hidden="true" href="#yq">#</a></h3>
<p>ç”¨æ¥è§£æ YAML çš„å·¥å…·,ä¹‹å‰<a href="https://www.bfsmlt.top/posts/023k3sep06%E4%BB%8Eissues%E4%B8%8A%E5%BE%97%E5%88%B0%E7%9A%84%E5%8F%AF%E8%83%BD%E5%B0%9D%E8%AF%95/#yq%e6%9c%aa%e5%ae%89%e8%a3%85">æ–‡ç« </a>ä¸­ä¹Ÿæåˆ°è¿‡.</p>
<p>è¿™é‡Œæˆ‘ä»¬ä¸ Golang ä¸€æ ·,ä»æºç æ„å»º,å› ä¸ºåŒ…ç®¡ç†ä¸­çš„ç‰ˆæœ¬å¤ªè€.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wget https://github.com/mikefarah/yq/releases/download/v4.44.6/yq_linux_riscv64.tar.gz
</span></span><span class="line"><span class="cl">tar -zvxf yq_linux_riscv64.tar.gz
</span></span><span class="line"><span class="cl">mv yq_linux_riscv64.tar.gz yq
</span></span><span class="line"><span class="cl">chmod +x yq
</span></span><span class="line"><span class="cl">mv yq /usr/local/bin
</span></span><span class="line"><span class="cl">yq --version
</span></span></code></pre></div><p>å¦‚æœä½ ä¹‹å‰ç”¨ apt å®‰è£…äº† yq,å¯èƒ½ä¼šå­˜åœ¨é”™è¯¯çš„ç¼“å­˜,å¯ä»¥ç”¨<code>hash -r</code>æ¸…ç†ç¼“å­˜.</p>
<h3 id="æƒé™é—®é¢˜">æƒé™é—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#æƒé™é—®é¢˜">#</a></h3>
<p>ä¸ºäº†æ–¹ä¾¿å’Œé¿å…å¯èƒ½å‡ºç°çš„æƒé™é—®é¢˜,æˆ‘ä»¬ä¸ºæºç ç›®å½•èµ‹äºˆ root æƒé™</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo chown -R <span class="k">$(</span>whoami<span class="k">)</span>:<span class="k">$(</span>whoami<span class="k">)</span> .
</span></span></code></pre></div><h3 id="è®¿é—®ä»“åº“ç½‘ç»œé—®é¢˜">è®¿é—®ä»“åº“ç½‘ç»œé—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#è®¿é—®ä»“åº“ç½‘ç»œé—®é¢˜">#</a></h3>
<p>å¦‚æœæˆ‘ä»¬è®¿é—®è‡ªå·±çš„ç§æœ‰ä»“åº“æ—¶é‡åˆ°ç½‘ç»œé—®é¢˜,ç‰¹åˆ«æ˜¯ DNS è§£æé—®é¢˜,é€šå¸¸æ˜¯å› ä¸º Network Management è‡ªåŠ¨ä¸ºæˆ‘ä»¬è®¾ç½®å¥½äº† DNS æœåŠ¡å™¨åœ°å€.</p>
<p>è€Œè¿™ç¯‡<a href="https://www.bfsmlt.top/posts/027%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C01dns/">æ–‡ç« </a>ä¸­æˆ‘ä»¬è°ˆåˆ°äº†è¿™äº› DNS æœåŠ¡å™¨å¾ˆéš¾ä¸å‡ºé—®é¢˜,ç‰¹åˆ«æ˜¯åœ¨è§£æå›½å¤–çš„æœåŠ¡å™¨æ—¶.</p>
<p>æ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨ä¸€ä¸ªæœ€ç®€å•çš„æ–¹æ³•,ä¿®æ”¹ <code>/etc/hosts</code> æ–‡ä»¶,å°†æœåŠ¡å™¨çš„ IP åŠ å…¥å…¶ä¸­.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># è¯·æ¢æˆè‡ªå·±çš„ ip ä¸ åŸŸå</span>
</span></span><span class="line"><span class="cl">IP Domain
</span></span></code></pre></div><h2 id="å®‰è£…ä¸å¸è½½è„šæœ¬">å®‰è£…ä¸å¸è½½è„šæœ¬<a hidden class="anchor" aria-hidden="true" href="#å®‰è£…ä¸å¸è½½è„šæœ¬">#</a></h2>
<p>å®éªŒè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°é—®é¢˜å¯¼è‡´ k3s ä¸èƒ½è¿è¡Œ,åœ¨æ­¤æƒ…å†µä¸‹å¦‚æœæˆ‘ä»¬éœ€è¦åˆ é™¤ k3s æˆ–è€…é‡æ–°å®‰è£… k3s,è¿™é‡Œç»™å‡ºä¸¤ç§æ“ä½œçš„è„šæœ¬.</p>
<h3 id="å¸è½½è„šæœ¬">å¸è½½è„šæœ¬<a hidden class="anchor" aria-hidden="true" href="#å¸è½½è„šæœ¬">#</a></h3>
<p>å°†å…¶ä» systemd ç®¡ç†ä¸­ç§»é™¤.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">set</span> -e
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ğŸ”§ åœæ­¢ k3s æœåŠ¡ï¼ˆå¦‚åœ¨è¿è¡Œï¼‰...&#34;</span>
</span></span><span class="line"><span class="cl">sudo systemctl stop k3s <span class="o">||</span> <span class="nb">true</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ğŸš« ç¦ç”¨ k3s æœåŠ¡å¼€æœºè‡ªå¯...&#34;</span>
</span></span><span class="line"><span class="cl">sudo systemctl disable k3s <span class="o">||</span> <span class="nb">true</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ğŸ§¹ åˆ é™¤ k3s systemd æœåŠ¡æ–‡ä»¶...&#34;</span>
</span></span><span class="line"><span class="cl">sudo rm -f /etc/systemd/system/k3s.service
</span></span><span class="line"><span class="cl">sudo rm -f /etc/systemd/system/k3s.service.env
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ğŸ”„ é‡æ–°åŠ è½½ systemd å®ˆæŠ¤è¿›ç¨‹...&#34;</span>
</span></span><span class="line"><span class="cl">sudo systemctl daemon-reload
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;âœ… éªŒè¯ k3s æœåŠ¡æ˜¯å¦å·²æ¸…é™¤...&#34;</span>
</span></span><span class="line"><span class="cl">sudo systemctl status k3s <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&#34;âœ… k3s.service å·²è¢«æˆåŠŸç§»é™¤ã€‚&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ğŸ‰ æ¸…ç†å®Œæˆã€‚&#34;</span>
</span></span></code></pre></div><h3 id="å®‰è£…è„šæœ¬">å®‰è£…è„šæœ¬<a hidden class="anchor" aria-hidden="true" href="#å®‰è£…è„šæœ¬">#</a></h3>
<p>å°†å…¶é‡æ–°åŠ å…¥ systemd ç®¡ç†,å‰ææ˜¯è„šæœ¬æ‰€åœ¨è·¯å¾„ä¸ k3s äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„ä¸€è‡´,ä¸ä¸€è‡´è¯·ä¿®æ”¹è„šæœ¬.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">set</span> -e
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ğŸ“¦ æ‹·è´æœ¬åœ° k3s åˆ° /usr/local/bin ...&#34;</span>
</span></span><span class="line"><span class="cl">sudo cp /home/debian/k3s /usr/local/bin/k3s
</span></span><span class="line"><span class="cl">sudo chmod +x /usr/local/bin/k3s
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ğŸ”§ é…ç½®ç§æœ‰é•œåƒä»“åº“ registries.yaml ...&#34;</span>
</span></span><span class="line"><span class="cl">sudo mkdir -p /etc/rancher/k3s
</span></span><span class="line"><span class="cl">cat <span class="s">&lt;&lt;EOF | sudo tee /etc/rancher/k3s/registries.yaml
</span></span></span><span class="line"><span class="cl"><span class="s">mirrors:
</span></span></span><span class="line"><span class="cl"><span class="s">  docker.io:
</span></span></span><span class="line"><span class="cl"><span class="s">    endpoint:
</span></span></span><span class="line"><span class="cl"><span class="s">      - &#34;https://jimlt.bfsmlt.top&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ğŸ“¥ è·å– k3s å®‰è£…è„šæœ¬ ...&#34;</span>
</span></span><span class="line"><span class="cl">curl -sfL https://get.k3s.io -o k3s-install.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ğŸš€ æ‰§è¡Œå®‰è£…è„šæœ¬ï¼Œä½¿ç”¨æœ¬åœ°å¯æ‰§è¡Œæ–‡ä»¶ ...&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">INSTALL_K3S_SKIP_DOWNLOAD</span><span class="o">=</span><span class="s2">&#34;true&#34;</span> bash -x k3s-install.sh
</span></span></code></pre></div><h2 id="å¯¹kubectlå‘½ä»¤è¿›è¡Œä¼˜åŒ–">å¯¹kubectlå‘½ä»¤è¿›è¡Œä¼˜åŒ–<a hidden class="anchor" aria-hidden="true" href="#å¯¹kubectlå‘½ä»¤è¿›è¡Œä¼˜åŒ–">#</a></h2>
<p>ä»¥ä¸‹ä¸¤ç§æ–¹æ³•å¯¹æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨ kubectl å‘½ä»¤å¸¦æ¥äº†æ–¹ä¾¿ã€‚</p>
<h3 id="å»sudoåŒ–">å»sudoåŒ–<a hidden class="anchor" aria-hidden="true" href="#å»sudoåŒ–">#</a></h3>
<p>ç”±äºé»˜è®¤çš„ k3s é…ç½®æ–‡ä»¶åœ¨ <code>/etc/rancher/k3s/k3s.yaml</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªåªæœ‰ root æƒé™æ‰å¯ä»¥è®¿é—®çš„è·¯å¾„ï¼Œè¿™å¯¼è‡´æ¯æ¬¡æˆ‘ä»¬ä½¿ç”¨ kubectl å‘½ä»¤éœ€è¦åœ¨å‰é¢åŠ ä¸Š sudo.</p>
<p>æ‰€ä»¥æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æ­¥éª¤å°†é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°ä¸»ç”¨æˆ·ç›®å½•ä¸‹ï¼Œå¹¶é…ç½®å¥½ç¯å¢ƒå˜é‡ï¼Œä½¿ kubectl å‘½ä»¤é»˜è®¤æŸ¥æ‰¾ä¸»ç”¨æˆ·ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚è¿™æ ·å°±å¯ä»¥ä¸ç”¨å†åŠ ä¸Š sudo</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir -p <span class="nv">$HOME</span>/.kube
</span></span><span class="line"><span class="cl">sudo cp /etc/rancher/k3s/k3s.yaml <span class="nv">$HOME</span>/.kube/config
</span></span><span class="line"><span class="cl">sudo chmod <span class="m">600</span> <span class="nv">$HOME</span>/.kube/config
</span></span><span class="line"><span class="cl">sudo chown <span class="k">$(</span>id -u<span class="k">)</span>:<span class="k">$(</span>id -g<span class="k">)</span> <span class="nv">$HOME</span>/.kube/config
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$HOME</span>/.kube/config
</span></span><span class="line"><span class="cl"><span class="c1"># å°†ä¸Šé¢çš„ export å‘½ä»¤æ·»åŠ åˆ°æ‚¨çš„ shell é…ç½®æ–‡ä»¶ (ä¾‹å¦‚ ~/.bashrc æˆ– ~/.zshrc) ä¸­ï¼Œä½¿å…¶æ°¸ä¹…ç”Ÿæ•ˆ</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;export KUBECONFIG=$HOME/.kube/config&#39;</span> &gt;&gt; ~/.bashrc <span class="c1"># å¦‚æœæ‚¨ä½¿ç”¨ bash</span>
</span></span><span class="line"><span class="cl"><span class="nb">source</span> ~/.bashrc <span class="c1"># ä½¿æ›´æ”¹ç«‹å³ç”Ÿæ•ˆ</span>
</span></span></code></pre></div><h3 id="ä½¿ç”¨kubectl-aliasesç®€åŒ–">ä½¿ç”¨kubectl-aliasesç®€åŒ–<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨kubectl-aliasesç®€åŒ–">#</a></h3>
<p>è¿™æ˜¯ä¸€ä¸ªåˆ«åæ“ä½œï¼Œå¯ä»¥è®©æˆ‘ä»¬ä¸å†è¾“å…¥ç¹æ‚çš„ kubectl å‘½ä»¤ï¼Œä¾‹å¦‚å°† <code>kubectl get pod</code> å¯ä»¥ç®€åŒ–ä¸º <code>kgpo</code>,å…·ä½“æ“ä½œä¹Ÿå¾ˆç®€å•ï¼ŒæŒ‰ç…§<a href="https://github.com/ahmetb/kubectl-aliases">å®˜ç½‘</a>çš„æ­¥éª¤è¿›è¡Œå³å¯ã€‚</p>
<h2 id="åç»­æ›´æ–°">åç»­æ›´æ–°<a hidden class="anchor" aria-hidden="true" href="#åç»­æ›´æ–°">#</a></h2>
<p>åç»­æ›´æ–°ä¼šæ ¹æ®æ„å»º k3s çš„è¿›å±•ä»¥åŠå¯èƒ½çš„å…¶ä»–åº”ç”¨ä¾‹å¦‚ Mobilenet è¿›è¡Œè¡¥å…….</p>
<p><strong>è¿™é‡Œæ˜¯LTXï¼Œæ„Ÿè°¢æ‚¨é˜…è¯»è¿™ç¯‡åšå®¢ï¼Œäººç”Ÿæµ·æµ·ï¼Œå’Œè‡ªå·±å¯¹è¯ï¼Œåƒåªè´è¶çºµæ¨ªå››æµ·ã€‚</strong></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://LTXWorld.github.io/tags/k3s/">K3s</a></li>
      <li><a href="https://LTXWorld.github.io/tags/linux%E6%93%8D%E4%BD%9C/">Linuxæ“ä½œ</a></li>
      <li><a href="https://LTXWorld.github.io/tags/riscv/">RiscV</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://LTXWorld.github.io/posts/035k3sep10%E6%88%90%E5%8A%9F%E8%BF%81%E7%A7%BBk3s%E8%87%B3riscv64%E5%BC%80%E5%8F%91%E6%9D%BF%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>K3sEP10â€”â€”è¿ç§»k3sè‡³riscv64å¼€å‘æ¿çš„è¿‡ç¨‹è®°å½•</span>
  </a>
  <a class="next" href="https://LTXWorld.github.io/posts/033k3sep08%E6%BA%90%E7%A0%81%E6%9E%84%E5%BB%BA%E8%A7%A3%E6%9E%90/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>K3sEP08â€”â€”makeåä¼šå‘ç”Ÿä»€ä¹ˆ?ä»æºç è§£ææ„å»ºè¿‡ç¨‹</span>
  </a>
</nav>

  </footer><div id="tw-comment"></div>

<script>

    

    const getStoredTheme = () => localStorage.getItem("pref-theme") === "light" ? "light" : "dark";

    const setGiscusTheme = () => {

        const sendMessage = (message) => {

            const iframe = document.querySelector('iframe.giscus-frame');

            if (iframe) {

                iframe.contentWindow.postMessage({giscus: message}, 'https://giscus.app');

            }

        }

        sendMessage({setConfig: {theme: getStoredTheme()}})

    }


    document.addEventListener("DOMContentLoaded", () => {

        const giscusAttributes = {

            "src": "https://giscus.app/client.js",

            "data-repo": "LTXWorld\/LTXWorld.github.io",

            "data-repo-id": "R_kgDONODUuA",

            "data-category": "Announcements",

            "data-category-id": "DIC_kwDONODUuM4CkMUw",

            "data-mapping": "pathname",

            "data-strict": "0",

            "data-reactions-enabled": "1",

            "data-emit-metadata": "0",

            "data-input-position": "bottom",

            "data-theme": getStoredTheme(),

            "data-lang": "zh-CN",

            "data-loading": "lazy",

            "crossorigin": "anonymous",

        };


        

        const giscusScript = document.createElement("script");

        Object.entries(giscusAttributes).forEach(

                ([key, value]) => giscusScript.setAttribute(key, value));

        document.querySelector("#tw-comment").appendChild(giscusScript);


        

        const themeSwitcher = document.querySelector("#theme-toggle");

        if (themeSwitcher) {

            themeSwitcher.addEventListener("click", setGiscusTheme);

        }

        const themeFloatSwitcher = document.querySelector("#theme-toggle-float");

        if (themeFloatSwitcher) {

            themeFloatSwitcher.addEventListener("click", setGiscusTheme);

        }

    });

</script>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://LTXWorld.github.io/">Â©2025 LTX&rsquo;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><div class="ltx-music-player" id="ltx-music-player" role="group" aria-label="èƒŒæ™¯éŸ³ä¹æ’­æ”¾å™¨">
  <audio id="ltx-music-audio" preload="metadata"></audio>
  <div class="ltx-drag-handle" data-role="drag-handle" title="ä¸Šä¸‹æ‹–åŠ¨è°ƒæ•´ä½ç½®"></div>
  <div class="ltx-music-header">
    <div class="ltx-music-visual">
      <div class="ltx-disc" data-role="disc" aria-hidden="true">
        <img data-role="cover" alt="" loading="lazy" decoding="async">
        <div class="ltx-disc-center"></div>
      </div>
    </div>
    <div class="ltx-music-meta">
      <span class="ltx-music-title" data-role="title"></span>
      <span class="ltx-music-artist" data-role="artist"></span>
    </div>
    <button type="button" class="ltx-music-hide" data-action="collapse" aria-label="éšè—æ’­æ”¾å™¨">&#215;</button>
  </div>
  <div class="ltx-music-progress" data-role="progress" aria-label="è¿›åº¦æ¡" role="slider">
    <div class="ltx-music-progress-fill" data-role="progress-fill"></div>
  </div>
  <div class="ltx-music-time">
    <span data-role="current">0:00</span>
    <span data-role="total">--:--</span>
  </div>
  <div class="ltx-music-controls">
    <button type="button" data-action="prev" aria-label="ä¸Šä¸€é¦–">â®</button>
    <button type="button" data-action="toggle" aria-label="æ’­æ”¾æˆ–æš‚åœ">
      <span data-icon="play">â–¶</span>
      <span data-icon="pause">â¸</span>
    </button>
    <button type="button" data-action="next" aria-label="ä¸‹ä¸€é¦–">â­</button>
    <button type="button" data-action="mute" aria-label="é™éŸ³æˆ–å–æ¶ˆé™éŸ³">
      <span data-icon="unmuted">ğŸ”Š</span>
      <span data-icon="muted">ğŸ”‡</span>
    </button>
  </div>
  <div class="ltx-autoplay-tip" data-role="tip" aria-live="polite"></div>
</div>
<button type="button" class="ltx-music-fab" id="ltx-music-fab" aria-label="æ˜¾ç¤ºéŸ³ä¹æ’­æ”¾å™¨">&#9835;</button>
<script>
  window.LTX_MUSIC_CONFIG = {"autoplay":true,"defaultCover":"","loopPlaylist":true,"startVolume":0.6,"tracks":[{"artist":"ç‹åŠ›å®","file":"/audio/02 - ä¾ç„¶çˆ±ä½ .mp3","title":"ä¾ç„¶çˆ±ä½ "},{"artist":"ç‹åŠ›å®","file":"/audio/05 - æ”¹å˜è‡ªå·±.mp3","title":"æ”¹å˜è‡ªå·±"},{"artist":"ç‹åŠ›å®","file":"/audio/11 - çˆ±é”™.mp3","title":"çˆ±é”™"}]};
  (function () {
    const config = window.LTX_MUSIC_CONFIG || {};
    if (!config.tracks || !config.tracks.length) {
      return;
    }

    const player = document.getElementById('ltx-music-player');
    const audio = player.querySelector('audio');
    const titleEl = player.querySelector('[data-role="title"]');
    const artistEl = player.querySelector('[data-role="artist"]');
    const progressEl = player.querySelector('[data-role="progress"]');
    const progressFillEl = player.querySelector('[data-role="progress-fill"]');
    const currentTimeEl = player.querySelector('[data-role="current"]');
    const totalTimeEl = player.querySelector('[data-role="total"]');
    const tipEl = player.querySelector('[data-role="tip"]');
    const coverEl = player.querySelector('[data-role="cover"]');

    const toggleBtn = player.querySelector('[data-action="toggle"]');
    const prevBtn = player.querySelector('[data-action="prev"]');
    const nextBtn = player.querySelector('[data-action="next"]');
    const muteBtn = player.querySelector('[data-action="mute"]');
    const collapseBtn = player.querySelector('[data-action="collapse"]');
    const dragHandle = player.querySelector('[data-role="drag-handle"]');
    const fabButton = document.getElementById('ltx-music-fab');

    const clamp = (value, min, max) => Math.min(Math.max(value, min), max);
    const formatTime = (seconds) => {
      if (!Number.isFinite(seconds)) {
        return '--:--';
      }
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${String(mins).padStart(1, '0')}:${String(secs).padStart(2, '0')}`;
    };

    const minOffset = -120;
    const maxOffset = 220;
    const hideThreshold = 180;
    const dragState = { active: false, startY: 0, startOffset: 0, pointerId: null };
    const storageKey = 'ltx-music-player-state';

    const safeStorage = (() => {
      try {
        const probeKey = '__ltx_music_probe__';
        window.localStorage.setItem(probeKey, probeKey);
        window.localStorage.removeItem(probeKey);
        return window.localStorage;
      } catch (err) {
        console.warn('LTX music player: localStorage ä¸å¯ç”¨', err);
        return null;
      }
    })();

    const loadPersistedState = () => {
      if (!safeStorage) {
        return null;
      }
      try {
        const raw = safeStorage.getItem(storageKey);
        return raw ? JSON.parse(raw) : null;
      } catch (err) {
        console.warn('LTX music player: è¯»å–å†å²æ’­æ”¾çŠ¶æ€å¤±è´¥', err);
        return null;
      }
    };

    const normalizeIndex = (index, total) => {
      if (!Number.isInteger(index) || !total) {
        return 0;
      }
      return ((index % total) + total) % total;
    };

    const savedState = loadPersistedState();

    const state = {
      index: 0,
      tracks: config.tracks,
      autoplay: config.autoplay !== false,
      loopPlaylist: config.loopPlaylist !== false,
      offset: 0,
      collapsed: false,
    };

    if (savedState) {
      if (state.tracks.length && Number.isInteger(savedState.trackIndex)) {
        state.index = normalizeIndex(savedState.trackIndex, state.tracks.length);
      }
      if (Number.isFinite(savedState.offset)) {
        state.offset = clamp(savedState.offset, minOffset, maxOffset);
      }
      if (typeof savedState.collapsed === 'boolean') {
        state.collapsed = savedState.collapsed;
      }
    }

    let lastPersistAt = 0;
    const persistState = (overrides = {}, immediate = false) => {
      if (!safeStorage) {
        return;
      }
      const snapshot = {
        trackIndex: state.index,
        currentTime: audio.currentTime || 0,
        isPlaying: !audio.paused,
        volume: audio.volume,
        muted: audio.muted,
        collapsed: state.collapsed,
        offset: state.offset,
        ...overrides,
      };
      const now = Date.now();
      if (!immediate && now - lastPersistAt < 800) {
        return;
      }
      lastPersistAt = now;
      try {
        safeStorage.setItem(storageKey, JSON.stringify(snapshot));
      } catch (err) {
        console.warn('LTX music player: ä¿å­˜æ’­æ”¾çŠ¶æ€å¤±è´¥', err);
      }
    };

    const flushState = (overrides = {}) => persistState(overrides, true);

    const setOffset = (value, options = {}) => {
      state.offset = clamp(value, minOffset, maxOffset);
      player.style.setProperty('--ltx-offset', `${state.offset}px`);
      if (!options.silent) {
        persistState({ offset: state.offset });
      }
    };

    const setCollapsed = (value, options = {}) => {
      const collapsed = Boolean(value);
      state.collapsed = collapsed;
      player.classList.toggle('ltx-collapsed', collapsed);
      if (collapsed) {
        player.classList.remove('ltx-dragging');
        state.offset = 0;
        player.style.removeProperty('--ltx-offset');
        if (fabButton) {
          fabButton.classList.add('ltx-visible');
          fabButton.setAttribute('aria-hidden', 'false');
          fabButton.tabIndex = 0;
        }
      } else {
        setOffset(0);
        if (fabButton) {
          fabButton.classList.remove('ltx-visible');
          fabButton.setAttribute('aria-hidden', 'true');
          fabButton.tabIndex = -1;
        }
      }
      if (!options.silent) {
        persistState({ collapsed }, true);
      }
    };

    const updateMuteClass = () => {
      const muted = audio.muted || audio.volume === 0;
      player.classList.toggle('ltx-muted', muted);
    };

    const hasSavedVolume = savedState && Number.isFinite(savedState.volume);
    const initialVolume = hasSavedVolume ? clamp(savedState.volume, 0, 1) : clamp(config.startVolume ?? 0.6, 0, 1);
    audio.volume = initialVolume;
    if (savedState && typeof savedState.muted === 'boolean') {
      audio.muted = savedState.muted;
    }
    updateMuteClass();

    const updateProgress = () => {
      const duration = audio.duration || 0;
      const current = audio.currentTime || 0;
      const percentage = duration ? (current / duration) * 100 : 0;
      progressFillEl.style.width = `${percentage}%`;
      currentTimeEl.textContent = formatTime(current);
      totalTimeEl.textContent = formatTime(duration);
    };

    const seekWhenReady = (time) => {
      const target = Number.isFinite(time) ? Math.max(0, time) : 0;
      if (!target) {
        audio.currentTime = 0;
        flushState({ currentTime: 0 });
        updateProgress();
        return;
      }
      const assign = () => {
        const duration = audio.duration;
        const upper = Number.isFinite(duration) && duration > 0 ? Math.min(target, duration) : target;
        try {
          audio.currentTime = upper;
          updateProgress();
          flushState({ currentTime: upper });
        } catch (err) {
           
        }
      };
      if (audio.readyState >= 1) {
        assign();
      } else {
        const handler = () => {
          assign();
          audio.removeEventListener('loadedmetadata', handler);
          audio.removeEventListener('canplay', handler);
        };
        audio.addEventListener('loadedmetadata', handler);
        audio.addEventListener('canplay', handler);
      }
    };

    const setTrack = (nextIndex, options = {}) => {
      const total = state.tracks.length;
      state.index = ((nextIndex % total) + total) % total;
      const track = state.tracks[state.index];
      if (!track || !track.file) {
        console.warn('LTX music player: éŸ³é¢‘æ–‡ä»¶ç¼ºå¤±', track);
        tipEl.textContent = 'éŸ³é¢‘æ–‡ä»¶ç¼ºå¤±ï¼Œè¯·æ£€æŸ¥é…ç½®';
        return;
      }
      const cover = track.cover || config.defaultCover || '';
      if (coverEl) {
        if (cover) {
          coverEl.src = cover;
          coverEl.alt = track.title ? `${track.title} å°é¢` : 'éŸ³ä¹å°é¢';
          player.classList.add('ltx-has-cover');
        } else {
          coverEl.removeAttribute('src');
          coverEl.alt = '';
          player.classList.remove('ltx-has-cover');
        }
      }
      titleEl.textContent = track.title || `Track ${state.index + 1}`;
      artistEl.textContent = track.artist || '';
      audio.src = track.file;
      player.dataset.trackIndex = state.index;
      tipEl.textContent = '';
      player.classList.remove('ltx-autoplay-blocked');
      seekWhenReady(options.resumeTime);
      flushState({
        trackIndex: state.index,
        currentTime: Number.isFinite(options.resumeTime) ? Math.max(0, options.resumeTime) : 0,
      });
      updateProgress();
      if (options.play) {
        attemptPlay();
      }
    };

    const attemptPlay = () => {
      audio.play().then(() => {
        player.classList.remove('ltx-autoplay-blocked');
        tipEl.textContent = '';
      }).catch(() => {
        player.classList.add('ltx-autoplay-blocked');
        tipEl.textContent = 'æµè§ˆå™¨é˜»æ­¢äº†è‡ªåŠ¨æ’­æ”¾ï¼Œè¯·ç‚¹å‡»æ’­æ”¾æŒ‰é’®';
      });
    };

    const playNext = (autoTriggered = false) => {
      const shouldPlay = !audio.paused || autoTriggered;
      const nextIndex = state.index + 1;
      if (nextIndex >= state.tracks.length && !state.loopPlaylist) {
        audio.currentTime = audio.duration || 0;
        audio.pause();
        flushState();
        return;
      }
      setTrack(nextIndex, { play: shouldPlay });
    };

    const playPrev = () => {
      const shouldPlay = !audio.paused;
      setTrack(state.index - 1, { play: shouldPlay });
    };

    if (state.collapsed) {
      setCollapsed(true, { silent: true });
    } else {
      setOffset(state.offset, { silent: true });
    }

    if (collapseBtn) {
      collapseBtn.addEventListener('click', () => setCollapsed(true));
    }

    if (fabButton) {
      fabButton.addEventListener('click', () => setCollapsed(false));
      if (state.collapsed) {
        fabButton.classList.add('ltx-visible');
        fabButton.setAttribute('aria-hidden', 'false');
        fabButton.tabIndex = 0;
      } else {
        fabButton.setAttribute('aria-hidden', 'true');
        fabButton.tabIndex = -1;
      }
    }

    if (dragHandle) {
      dragHandle.style.touchAction = 'none';
      dragHandle.addEventListener('pointerdown', (event) => {
        if (state.collapsed) {
          return;
        }
        dragState.active = true;
        dragState.pointerId = event.pointerId;
        dragState.startY = event.clientY;
        dragState.startOffset = state.offset;
        if (dragHandle.setPointerCapture) {
          try {
            dragHandle.setPointerCapture(event.pointerId);
          } catch (err) {
             
          }
        }
        player.classList.add('ltx-dragging');
      });

      dragHandle.addEventListener('pointermove', (event) => {
        if (!dragState.active) {
          return;
        }
        const delta = event.clientY - dragState.startY;
        setOffset(dragState.startOffset + delta);
      });

      const finishDrag = () => {
        if (!dragState.active) {
          return;
        }
        if (dragState.pointerId !== null && dragHandle.releasePointerCapture) {
          try {
            dragHandle.releasePointerCapture(dragState.pointerId);
          } catch (err) {
             
          }
        }
        dragState.active = false;
        dragState.pointerId = null;
        player.classList.remove('ltx-dragging');
        if (state.offset > hideThreshold) {
          setCollapsed(true);
        } else {
          setOffset(state.offset);
        }
      };

      ['pointerup', 'pointercancel'].forEach((eventName) => {
        dragHandle.addEventListener(eventName, finishDrag);
      });

      dragHandle.addEventListener('pointerleave', () => {
        if (!dragState.active) {
          return;
        }
        finishDrag();
      });
    }

    toggleBtn.addEventListener('click', () => {
      if (audio.paused) {
        attemptPlay();
      } else {
        audio.pause();
      }
    });

    prevBtn.addEventListener('click', playPrev);
    nextBtn.addEventListener('click', () => playNext(false));

    muteBtn.addEventListener('click', () => {
      audio.muted = !audio.muted;
      updateMuteClass();
    });

    progressEl.addEventListener('click', (event) => {
      const rect = progressEl.getBoundingClientRect();
      const ratio = clamp((event.clientX - rect.left) / rect.width, 0, 1);
      if (Number.isFinite(audio.duration)) {
        audio.currentTime = ratio * audio.duration;
        flushState();
      }
    });

    audio.addEventListener('timeupdate', () => {
      updateProgress();
      persistState();
    });
    audio.addEventListener('loadedmetadata', () => {
      updateProgress();
      persistState();
    });

    audio.addEventListener('play', () => {
      player.classList.add('ltx-playing');
      player.classList.remove('ltx-autoplay-blocked');
      tipEl.textContent = '';
      flushState();
    });

    audio.addEventListener('pause', () => {
      player.classList.remove('ltx-playing');
      flushState();
    });

    audio.addEventListener('ended', () => {
      playNext(true);
    });

    audio.addEventListener('volumechange', () => {
      updateMuteClass();
      flushState();
    });
    audio.addEventListener('seeked', () => {
      flushState();
    });

    const handleVisibilityChange = () => {
      if (document.visibilityState === 'hidden') {
        flushState();
      }
    };

    window.addEventListener('pagehide', () => flushState());
    window.addEventListener('beforeunload', () => flushState());
    document.addEventListener('visibilitychange', handleVisibilityChange);

    const initialResumeTime = savedState && Number.isFinite(savedState.currentTime) ? Math.max(0, savedState.currentTime) : 0;
    const initialShouldPlay = savedState ? savedState.isPlaying === true : state.autoplay;
    setTrack(state.index, { play: initialShouldPlay, resumeTime: initialResumeTime });
  })();
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerHTML = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerHTML = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
